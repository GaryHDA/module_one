{% extends "dirt/temp_one.html" %}

{% block style %}


.txt-12 {
  font-size: 12px;
}

.txt-14 {
  font-size: 14px;
}
.bg-red {
  background-color: rgba(199, 31, 22, 1);

}
.col-sm{
  min-width:380px;
}

.wide-88 {
  width:88px;
  height:88px;
}
.wrapper {
  position: relative;
  display: block;
  width: 100%;
  height: 100%;
  overflow: hidden;
  transition: all .3s linear;
}

.shutter {
  position: relative;
  display: block;
  width: 33%;

  height: 16%;
  background: #fff;
  box-sizing: border-box;
  border-top: 1px solid #ffffff;
  transition: all .3s linear;
  cursor: pointer;
  overflow: hidden;
  z-index: 5;
  box-sizing: border-box;
  text-align: center;
  color: #000;
}

#whynot{
  width:80%;
  height:20%;
}
.bttn{
  width:100%;
  height:100%;
}
#why {
  width:50%;
  height:100%;
}
@media  (max-width: 767.98px) {
  .shutter{
    width: 100%;
    height: 20%;
  }

}
@media  (max-width: 767.98px) {
  #whynot {
    width:100%;
    height:30%;

  };
}

@media  (max-width: 767.98px) {
  #why {
    width:100%;
    height:100%;

  };
}


.shutterOpen .shutter {
  height: 0;
}

.shutter.shutterExpanded {
  height: 100%;
  width:100%;
  overflow:auto;
  <!-- width:100%; -->
}

{% endblock %}
{% block return_to %}
{% endblock %}

{% block content %}
{% load humanize %}{% load static %}


  <div class="container-fluid p-0 m-0" style="height:100vh; width:100%">
    <div class="wrapper p-0  mx-auto" style="height:100%">
      <div class="shutter mx-auto" >
        <div class="row bg-dark p-1"  style="height:100%" >
          <h5 class="w-100 text-white">Welcome to the Water quality section</h5>
          <p class="text-white mx-auto">Click on a tab below to get started.<br> If you have any questions contact us.</p>
        </div>
      </div>
      <div class="shutter mx-auto" id="read_me_mb">
        <div class="row no-gutters bg-info shutterTitle p-2" style="height:100%">
          <h5 class="w-100 text-white"> --> Read me first <-- <br>
          <small class="text-left">Why did we do this project? Includes a brief history of the project and current regulations.</small></h5>
        </div>
        <div class="row no-gutters" style="height:100%">
          <div class="col-sm" id='bg' style="">
            <div class="card pb-0 mx-auto" id="why" style="" >
              <div class="card-header m-0 w-100 bg-dark text-left" id="" style="">
                <h4 class="text-white">Why is this important? <br><small class="text-white">Organizers of events are responsible for mitigating the environmental pressures caused by those events.</small> </h4>
              </div>
              <div class="card-body p-1 w-100 text-left" >
                <div id="whynot" class="container mx-auto ">
                  <div class="row no-gutters" style="height:20%">
                    <div class="col-sm-4 p-0 m-0">
                      <a class="btn bttn bg-info text-white p-1 m-0 border-white" style="white-space:normal;" data-toggle="modal"  data-target="#partnership" aria-expanded="false" aria-controls="table-of-results">
                         A partnership
                      </a>
                    </div>
                    <div class="col-sm-4 p-0 m-0">
                      <a class="btn bttn bg-info text-white p-1 m-0 border-white" style="white-space:normal;" data-toggle="modal" data-target="#regulations" aria-expanded="false" aria-controls="">
                         Current regulations
                      </a>
                    </div>
                    <div class="col-sm-4 p-0 m-0" >
                      <a class="btn bttn bg-info text-white m-0 p-1 border-white" style="white-space:normal;" data-toggle="modal"  data-target="#objectives" aria-expanded="false" aria-controls="">
                         Objectives
                      </a>
                    </div>
                  </div>
                </div>
                <div class="list-group ">
                  <div class="list-group-item flex-column align-items-start mt-2">
                    <div class="d-flex w-100 justify-content-between ">
                      <h6 class="mb-1">Large public events can change the bacterial fauna of lake-water
                        <br><small class="text-muted">There is no public testing for short term changes
                          <br></small></h6>
                    </div>
                  </div>
                  <div class="list-group-item flex-column align-items-start">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1">As population desnisty changes so does the use of the lake-shore
                        <br><small class="text-muted">As the number of people increases so does the number of bathers
                        <br></small></h6>
                    </div>
                  </div>
                  <div class="list-group-item flex-column align-items-start">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1">Better management
                        <br><small class="text-muted">The organizers of events are not aware of the effects (because there is no testing)
                        <br></small></h6>
                    </div>
                  </div>
                  <div class="list-group-item flex-column align-items-start">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1">Special thanks
                        <br><small class="text-muted">Thanks to Rachel for her patience and expertise
                        <br></small></h6>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="shutter mx-auto" id="combined_data_mb">
        <div class="row no-gutters bg-info shutterTitle p-2" style="height:100%">
          <h5 class="w-100 text-white">Results year one and two<br>
          <small> The sampling was repeated two years consecutiveley at the same locations, during the same time frame</small></h5>
        </div>
        <div class="row no-gutters" id='cd' style="height:100% ">
          <div class="col-sm" id='cd_0' style="height:100%">
            <div class="card pb-0" id="cd_1" style="height:100%">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Summary:
              </div>
              <div class="card-body p-0 text-left" style="height:100%">
                <h6 class="card-title"> Project summary "Microbiological survey"
                  <br><small class="text-muted">
                    In partnership with the <a href="http://wiki.hackuarium.ch/w/Micro_to_Macro_Water_Pollution"> hackuarium </a> and <a href="https://biodesign.cc/"> biodesign.cc</a></small>
                  </h6>
                  <table class="table table-striped table-sm" style="height:30%">
                    <thead>
                      <tr>
                        <th colspan="2" class="text-center">Survey 2016 </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>N<sup>o</sup> of samples:</td>
                        <td>216</td>
                      </tr>
                      <tr>
                        <td>N<sup>o</sup> of locations:</td>
                        <td>3</td>
                      </tr>
                      <tr>
                        <td>First sample:</td>
                        <td>2016-06-21</td>
                      </tr>
                      <tr>
                        <td>Last sample:</td>
                        <td>2016-08-09</td>
                      </tr>
                    </tbody>
                  </table>
                <button class="btn bg-info w-100 p-2 pl-3 text-white text-left border-white" style="height:8%"  role="button" data-toggle="modal" data-target="#medium" aria-expanded="false" aria-controls="">
                  Culture medium specifications</button>
                <table class="table table-striped table-sm" style="height:30%">
                  <thead>
                    <tr>
                      <th colspan="2" class="text-center">Survey 2017 </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>N<sup>o</sup> of samples:</td>
                      <td>213</td>
                    </tr>
                    <tr>
                      <td>N<sup>o</sup> of locations:</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td>First sample:</td>
                      <td>2016-06-12</td>
                    </tr>
                    <tr>
                      <td>Last sample:</td>
                      <td>2016-07-31</td>
                    </tr>
                  </tbody>
                </table>

                <button class="btn bg-info p-2 pl-3 text-white text-left border-white w-100" style="height:8%" data-toggle="modal"  data-target="#assume" aria-expanded="false" aria-controls="table-of-results">
                  Reading list</button>
                <button class="btn bg-info p-2 pl-3 text-white text-left border-white w-100"  style="height:8%" data-toggle="modal" data-target="#arrays" aria-expanded="false" aria-controls="">
                  <i class="fa fa-bar-chart fa-lg"></i>&nbsp;Colony counts per week, per location</button>
              </div>
            </div>
          </div>
          <div class="col-sm" id="cd_01"  style="">
            <div class="card pb-0" id="cd_9"  style="height:100%">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Location of samples:
              </div>
              <div class="card-body p-0 text-left"  style="height:100%">
                <h6 class="card-title">Map of sampling sites
                  <br><small class="text-muted">The same sites were surveyed in 2016 and 2017</small></h6>
                <div id="maps" class="" style="height:76%; min-height:460px"></div>
              </div>
            </div>
          </div>
          <div class="col-sm" id="cd_02"  style="height:100%" >
            <div class="card pb-0" id="cd_10"  style="height:100%">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Results by year
              </div>
              <div class="card-body p-0 text-left"  style="height:100%">
                <h6 class="card-title">Aggregated results by year, location and colony-colors</h6>
                  <figure class="figure w-100 mb-1" style="height:40%">

                    <img src="{% static 'images/cfu_week.png' %}" class="img-fluid btn" style="" role="button" data-toggle="modal" data-target="#results_2017" >
                    <figcaption class="figure-caption text-right pr-2">Click on image above to see results for 2017</figcaption>


                  </figure>
                  <figure class="figure w-100 mb-1" style="height:40%">
                    <img src="{% static 'images/cfu_week_16.png' %}" class="img-fluid btn" style="" role="button" data-toggle="modal" data-target="#results_2016">
                    <figcaption class="figure-caption text-right pr-2">Click on image above to see results for 2016</figcaption>

                  </figure>

                </div>
              </div>
            </div>
          </div>
        </div>
      <div class="shutter mx-auto" id="factors">
        <div class="row no-gutters bg-info shutterTitle p-2" style="height:100%">
          <h5 class="w-100 text-white">Economic and environmental influences<br>
          <small>What are some of the factors that can cause an increase of E.coli in lakewater?</small></h5>
        </div>
        <div class="row no-gutters" id='gb' style="height:100% ">
          <div class="col-sm" id='gb_0' style="height:100%">
            <div class="card pb-0" id="">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Large Events
              </div>
              <div class="card-body text-left" style="height:100%">
                <h6 class="card-title ">The Montreux Jazz Festival
                  <br><small class="text-muted">Second largest jazz festival in the world
                  <br>Most of the events happen within 100 meters of the lake shore</small></h6>
                <p> The Montreux Jazz festival draws between 200K and 250K people per year. The organizers install temporary toilets that hook up to the local water treatment facility. As opposed to using chemical toilets.</p>
                <p> The samples for this study were taken before, during and after the jazz festival.</p>
                <figure class="figure w-100 mb-1" style="height:40%">
                  <img src="{% static 'images/jazz_dif.svg' %}" class="img-fluid btn" style="" role="button" data-toggle="modal" data-target="#jazz_diff">
                  <figcaption class="figure-caption text-right pr-2">Click on image for lager scale</figcaption>
                </figure>
              </div>
            </div>
          </div>
          <div class="col-sm" id='gb_1' style="height:100%">
            <div class="card pb-0" id="">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Population
              </div>
              <div class="card-body text-left" style="height:100%">
                <h6 class="card-title ">Hotel nights sold per month
                  <br><small class="text-muted">The number of hotel nights sold increases by 50% in one month
                  <br>Source: <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/tourism.html>">Swiss federal office of statistics</a></small></h6>
                <p>Montreux is a tourist town, with a population of ~25'000.  When this project was conceived, the annual report by the <a href="http://www.cipel.org/en/">CIPEL</a> showed that, sewage overflows were under estimated. See the <a href="http://www.cipel.org/wp-content/uploads/2016/10/12_controle_STEP_camp_2015.pdf"> report</a> (in french)</p>
                <p>The hotel nights effectiveley double (almost triple the population)</p>
                <figure class="figure w-100 mb-1" style="height:40%">
                  <img src="{% static 'images/hotel_dif.svg' %}" class="img-fluid btn" style="" role="button" data-toggle="modal" data-target="#hotel_diff">
                  <figcaption class="figure-caption text-right pr-2">Click on image for lager scale</figcaption>
                </figure>
              </div>
            </div>
          </div>
          <div class="col-sm" id='gb_2' style="height:100%">
            <div class="card pb-0" id="">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Precipitation
              </div>
              <div class="card-body text-left" style="height:100%">
                <h6 class="card-title ">72 hour rainfall totals
                  <br><small class="text-muted">Coliforms tend to increase in lake water during and after rain events
                  <br>Increases in E.coli suggest a bypass of the water treatment system</small></h6>
                <p> If changes in the bacterial fauna are due to rainfall then we should see an increase in colony counts as rainfall increases.</p>
                <p>However, the change would only be relfected if the capacity of the water treatment facility was surpassed. This would produce a spike in the graph above a certain amount of rainfall</p>
                <figure class="figure w-100 mb-1" style="height:40%">
                  <img src="{% static 'images/rain_dif.svg' %}" class="img-fluid btn" style="" role="button" data-toggle="modal" data-target="#rain_diff">
                  <figcaption class="figure-caption text-right pr-2">Click on image for lager scale</figcaption>
                </figure>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="shutter mx-auto" id="notes">
        <div class="row no-gutters bg-info shutterTitle" style="height:100%" >
            <h5 class="w-100 text-white">Notebooks and code samples<br>
            <small>Work in progress, analysis of results is done in a notebook first. This is a collection of those notebooks.</small></h5>

        </div>
        <div class="row no-gutters" id='ap' style="height:100% ">
          <div class="col-sm" id='ap_0' style="height:100%">
            <div class="card pb-0" id="">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Data wrangling and cat herding
              </div>
              <div class="card-body text-left" style="height:100%">
                <h6 class="card-title">Putting the data together
                  <br><small class="text-muted">The project was spread out over two years
                  <br>Methods used to record the data changed from one year to the next</small></h6>
                <p class="card-text">This is the initital notebook used to communicate interim results between team members</p>
                <p class="card-text">Here we decide on analysis methods, how to deal with results that are "Too numerous to count" or "Below detecable limit"</p>
                <p class="card-text"> Links to a <a href="https://github.com/hammerdirt/notes/blob/master/micro/Initial%20sorting%20and%20cat%20herding%20micro.ipynb"> repository on Github </a></p>
                <img src="{% static 'images/screenshot.png' %}" class="img-fluid">
              </div>
            </div>
          </div>
          <div class="col-sm" id='ap_1' style="height:100%">
            <div class="card pb-0" id="">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Aggregating the results
              </div>
              <div class="card-body text-left" style="height:100%">
                <h6 class="card-title">Developing the arrays of results
                  <br><small class="text-muted">How to visualize all the weekly results from one year, by location and colony color.
                  <br>Changes in the culture medium from one year to the next complicate the task just a smidge.</small></h6>
                <p class="card-text">Results arrays are common when the data is generated by a machine, it is a whole different story when you need to code the array from scratch and account for non-numerical results.</p>
                <p class="card-text">Links to a <a href="https://github.com/hammerdirt/notes/blob/master/micro/24_hr_arrays.ipynb"> repository on Github </a></p>
                <img src="{% static 'images/screenshot2.png' %}" class="img-fluid">
              </div>
            </div>
          </div>
          <div class="col-sm "  id='ap_2' style="height:100%">
            <div class="card pb-0" id="">
              <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
                Creating useable output
              </div>
              <div class="card-body text-left" style="height:100%">
                <h6 class="card-title">Creating charts and data for app and publications
                  <br><small class="text-muted">Incorporating independent variables (hotel nights, rainfall)
                  <br>Ensuring that print and application output are the same(not including color scheme)</small></h6>
                <p class="card-text">Here we generate output for our webapp. That means creating dictionaries of values that can be exploited by a variety of platforms. We chose JSON as the format.</p>
                <p class="card-text">Links to a <a href="https://github.com/hammerdirt/notes/blob/master/micro/output_for_hdch.ipynb"> repository on Github </a></p>

                <img src="{% static 'images/rain_dif.svg' %}" class="img-fluid">
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
    <div class="modal fade w-100" id="partnership">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Water sampling and testing requires a variety of resources and skills<br>
              <small class="text-muted">Community based environmental monitoring requires a community
              <br>Our partners:</small>
            </h5>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <dl class="row">
              <dt class="col-sm-3">Action for Genomic integrity through Research!</dt>
              <dd class="col-sm-9">Technical oversight for the microbial assays, training of hammerdirt staff, quality control of laboratory operations and of sample processing and analyses.</dd>
            </dl>
            <dl class="row">
              <dt class="col-sm-3">Hackuarium</dt>
              <dd class="col-sm-9">Laboratory infrastructure and security, testing equipment and supplies for biologicals.</dd>
            </dl>
            <dl class="row">
              <dt class="col-sm-3">biodesign.cc</dt>
              <dd class="col-sm-9">Analysis of samples for mercury, Cadmium Zinc, Alkanes and arsenic using the bio-reporters.</dd>
            </dl>
            <dl class="row">
              <dt class="col-sm-3">hammerdirt</dt>
              <dd class="col-sm-9">Collection and processing of samples, data storage and administration. Communication of analyses and results.</dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade w-100" id="regulations">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Switzerland has a national policy on bathing water quality<br>
              <small class="text-muted">Two federal agencies publish recomendations for monitoring
              <br>The office of the environment and the office of public health</small>
            </h5>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h5>The current federal regulation can be found <a href="https://www.bafu.admin.ch/bafu/fr/home/themes/eaux/publications/publications-eaux/evaluation-eaux-baignade.html">here</a></h5>
            <p>Switzerland also follows EU guidelines for reporting bathing water quality results.</p>
            <p>It is highly recomended that you read the current regulation to understand the results of our project and how monitoring of this sort differs from current practices.</p>
            <p>The sites sampled in this project are not included in the normal testing regimen by the state or local authorities. In this sense the project was desigend to be a supplement to the current regimen
              and alert authorities and the public to pressures exerted on the lake ecosystem by large public events on the lake shore.</p>
            <p>Our sampling and testing methods can be found <a href="http://wiki.hackuarium.ch/w/Micro_to_Macro_Water_Pollution"> here </a></p>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="objectives">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Fill in the blanks<br>
              <small class="text-muted">Understand how large public events change the quality of water<br>
              Identify other independent variables that correlate with observed changes in water quality</small>
            </h5>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>
              There are many factors that can effect water quality in the short-term. We wanted a multiyear series of data that could be compared against other seasonal changes.</p>
            <p>To reflect changes in population we chose the reported number of "Hotel nights sold" by the city of Montreux and a large pubilc event that happens close to the lake.</p>
            <p>Precipitation rates can effect water quality testing in a variety of ways, to that end we were lucky. The preciptation rates were drastically different from one year to the next, but the average colony counts were not.</p>

          </div>
        </div>
      </div>
    </div>
    <div class="modal fade w-100" id="medium">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title">ECA Check Easygel Specification guide<small class="text-muted">
            <br>Source: Micrology laboratories, <a href="https://www.micrologylabs.com/index"> Micrology labs</a></small></h6>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="card-group">
              <div class="card " style="">
                <div class="card-body">
                  <dl class="row">
                    <dt class="col-sm-3">Selectvie for:</dt>
                    <dd class="col-sm-9">E. coli, total coliforms, Salmonells spp and Aeromonas spp.</dd>
                  </dl>
                  <dl class="row">
                    <dt class="col-sm-3">Description:</dt>
                    <dd class="col-sm-9">
                      ECA Check® is a clear medium containing a chromogenic substrate mixture.
                      Enzymes specific to each of the four bacterial groups react with their specific
                      chromogenic substrates to produce the colors that differentiate each bacterial type.
                    </dd>
                  </dl>
                  <dl class="row">
                    <dt class="col-sm-3">Composition:</dt>
                    <dd class="col-sm-9">
                      Contains nutrients and chromogenic substrates. pH 7.2 ± 0.2
                    </dd>
                  </dl>
                  <dl class="row">
                    <dt class="col-sm-3">Incubation time</dt>
                    <dd class="col-sm-9">
                      24-48 hrs at 35ºC. It is possible to take accurate readings at 24 hours incubation time.
                      Colors will intensify and colony size will be larger at 36-48 hours.
                    </dd>
                  </dl>
                  <dl class="row">
                    <dt class="col-sm-3">Interpretation of results</dt>
                    <dd class="col-sm-9">
                      <ul>
                        <li>
                          E. coli* colonies will have a dark blue/purple overall colony color.
                        </li>
                        <li>
                          Non-fecal coliforms (Enterobacter, Citrobacter and Klebsiella spp. & others) are lighter blue/grey to purplish in color.
                        </li>
                        <li>
                          Salmonella spp. appear as green/teal colonies.
                        </li>
                        <li>
                          Aeromonas spp. are pink to very light pink.
                        </li>
                        <li>
                          Gram-positive organisms are generally inhibited
                        </li>
                      </ul>

                    </dd>
                  </dl>
                </div>
              </div>
              <!-- <div class="card " style="">
                <h5 class="card-title">Pick a  body of water</h5>
                <div class="card-body">
                  <form class="d-inline-block mb-1" action='/dirt/search_water/' method='get'>
                  <i class="fa fa-folder-open fa-lg mr-1 "></i>&nbsp;Details:&nbsp;&nbsp;
                  <select class="form-control-sm d-inline-block mr-2"style="width:160px" name='water'>
                    {% for x in all_water %}
                    <option class="txt-12" value= "{{ x }}">{{ x }}</option>
                    {% endfor %}
                  </select>
                  <button class="d-inline-block btn txt-14 p-1" style="background-color:transparent; border-color:black; border-width:1px" type='submit' ><i class="fa fa-external-link fa-lg"></i></button>
                </form>
                  <div class="card-text"><small>* Get all results from a river or lake </small></div>
                </div>
              </div>
              <div class="card " style="">
                <h5 class="card-title">Pick a  project</h5>
                <div class="card-body">
                  <div class="container-fluid p-0 m-0">
                    <div class="btn-toolbar mb-1">
                    <div class="btn-group">
                      <a class="btn bg-info text-white mt-1 p-2 border-white"  style="white-space: normal;" href="{% url 'slr_home' %}" aria-expanded="false" aria-controls="">
                        SLR</a>
                      <a class="btn bg-info text-white mt-1 p-2 border-white" style="white-space: normal;" href="{% url 'mcbp_home' %}" aria-expanded="false" aria-controls="table-of-results">
                          MCBP</a>
                    </div>
                  </div>
                  </div>
                  <div class="card-text"><small>* SLR results given in m<sup>2</sup></small></div>
                </div>
              </div> -->
            </div>
          </div>
          <div class="modal-footer bg-info">
            <button type="button" class="close text-white" data-dismiss="modal" aria-label="close">
              <span aria-hidden="true">&times;</span></button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="assume">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">List of resources used for the planning of this project<br>
              <small class="text-muted">This list is not comprehensive</small>
            </h5>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <table class="table table-sm">
              {% for a, b in books.items %}
              <tr class="">
                <td class="font-weight-bold">{{ a }}:</td>
              </tr>
              {% for tome in b %}
              <tr class="">
                <td>{{ tome.title }}</td>
                <td> {{ tome.author }}</td>
                <td> {{ tome.abstract }}</td>
              </tr>
              {% endfor %}
              {% endfor %}
            </table>


          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="results_2016">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title">Microbiological survey results summer 2016</h6>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
            <h6 class="modal-title mb-1 pl-2">Average total colony forming units June - July -Aug 2016<small class="text-muted">
              <br>Medium: ECA Easygel, incubation time: 24hrs
              <br>Three samples per location, per day. Tuesdays between 10am and 12noon</small></h6>
            <div id="box-plot4" style="min-height:360px; min-width:380px"></div>
            <div class="container-fluid ">
              <div class="w-100 pt-3 pb-1">
                <dl class="row">
                  <dt class="col-sm-3">Interpretation of results</dt>
                  <dd class="col-sm-9">
                    <ul>
                      <li>
                        Big Blue: E. coli colonies
                      </li>
                      <li>
                        Med Blue: Non-fecal coliforms (Enterobacter, Citrobacter and Klebsiella species.
                      </li>
                      <li>
                        Turquoise: Salmonella species.
                      </li>
                      <li>
                        Pink: Aeromonas species.
                      </li>
                      <li>
                        Gray: Unknown species
                      </li>
                    </ul>
                  </dd>
                </dl>
              </div>
            </div>
            <h6 class="modal-title mb-1 pl-2">Average total Big blue colony forming units June - July - Aug 2016<small class="text-muted">
              <br>Medium: ECA Easygel, incubation time: 24hrs
              <br>Three samples per location, per day. Tuesdays between 10am and 12noon</small></h6>
            <div id="box-plot5" style="min-height:360px; min-width:380px"></div>
            <div class="container-fluid mt-2">
              <h6 class="card-title">2016 Easygel AVERAGE 24hr total colony counts, by week, location, species
                <br><small class="text-muted">Day of the week : Tuesdays, time between 10h-12h.
                <br>BDL = 'Below detectable limit', TMTC = 'Too many to count', if the box is empty there was no sample
                <br>Week one/day-one: 2016-06-21; Week eight/day-eight: 2016-08-09</small></h6>
              <table class="table table-sm m-0, p-0">
                <thead>
                  <tr>
                    <!-- <th>UV - E.coli</th> -->
                    <th>E.coli</th>
                    <th>Other coliform</th>
                    <!-- <th>Unknown</th> -->
                    <th>Salmonella</th>
                    <th>Aeromonas</th>
                    <th>Unknown
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <!-- <td style="background-color:#7f1ae5; height:40px; width:16%"></td> -->
                    <td style="background-color:#00008b; height:40px; width:20%"></td>
                    <td style="background-color:#1e90ff; height:40px; width:20%"></td>
                    <!-- <td style="background-color:#008000; height:40px; width:16%"></td> -->
                    <td style="background-color:#40e0d0; height:40px; width:20%"></td>
                    <td style="background-color:#FFC0CB; height:40px; width:20%"></td>
                    <td style="background-color:#778899; height:40px; width:20%"></td>
                  </tr>
                </tbody>
              </table>
              <img src="{% static 'images/array_2016_av.png' %}" class="img-fluid" style="min-width:400px">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="results_2017">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title">Microbiological survey results summer 2017</h6>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
            <h6 class="modal-title mb-1 pl-2">Average total colony forming units June - July 2017<small class="text-muted">
              <br>Medium: ECA Easygel+ UV, incubation time: 24hrs
              <br>Three samples per location, per day. Tuesdays between 10am and 12noon</small></h6>
            <div id="box-plot" style="min-height:360px; min-width:380px"></div>
            <div class="container-fluid ">
              <div class="w-100 pt-3 pb-1">
                <dl class="row">
                  <dt class="col-sm-3">Interpretation of results</dt>
                  <dd class="col-sm-9">
                    <ul>
                      <li>
                        UV & Big Blue: E. coli colonies
                      </li>
                      <li>
                        Med Blue: Non-fecal coliforms (Enterobacter, Citrobacter and Klebsiella species.
                      </li>
                      <li>
                        Turquoise: Salmonella species.
                      </li>
                      <li>
                        Pink: Aeromonas species.
                      </li>
                      <li>
                        Gray, Green : Unknown species
                      </li>
                    </ul>
                  </dd>
                </dl>
              </div>
            </div>
            <h6 class="modal-title mb-1 pl-2">Average total Ultraviolet colony forming units June - July 2017<small class="text-muted">
              <br>Medium: ECA Easygel+ UV, incubation time: 24hrs<br>Three samples per location, per day. Tuesdays between 10am and 12noon</small></h6>
            <div id="box-plot2" style="min-height:360px; min-width:380px"></div>
            <h6 class="modal-title mb-1 pl-2">Average total Big blue colony forming units June - July 2017<small class="text-muted">
              <br>Medium: ECA Easygel+ UV, incubation time: 24hrs
              <br>Three samples per location, per day. Tuesdays between 10am and 12noon</small></h6>
            <div id="box-plot3" style="min-height:360px; min-width:380px"></div>
            <div class="container-fluid mt-2">
              <h6 class="card-title">2017 Easygel+ UV AVERAGE 24hr Total colony counts, by week, location, species
                <br><small class="text-muted">Day of the week : Tuesdays, time between 10h-12h.
                <br>BDL = 'Below detectable limit', TMTC = 'Too many to count', if the box is empty there was no sample
                <br>Week one/day-one: 2017-06-12; Week eight/day-eight: 2017-07-31</small></h6>
              <table class="table table-sm m-0, p-0">
                <thead>
                  <tr>
                    <th>UV - E.coli</th>
                    <th>E.coli</th>
                    <th>Other coliform</th>
                    <th>Unknown</th>
                    <th>Salmonella</th>
                    <th>Aeromonas</th>
                    <th>Unknown
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="background-color:#7f1ae5; height:40px; width:14%"></td>
                    <td style="background-color:#00008b; height:40px; width:14%"></td>
                    <td style="background-color:#1e90ff; height:40px; width:14%"></td>
                    <td style="background-color:#008000; height:40px; width:14%"></td>
                    <td style="background-color:#40e0d0; height:40px; width:14%"></td>
                    <td style="background-color:#FFC0CB; height:40px; width:14%"></td>
                    <td style="background-color:#778899; height:40px; width:14%"></td>
                  </tr>
                </tbody>
              </table>
              <img src="{% static 'images/array_2017.png' %}" class="img-fluid" style="min-width:400px">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade w-100" id="arrays">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="card-title">2016 & 2017 EZ Gel AVERAGE 24hr colony counts, including UV fluo(2017)
            </h6>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
            <div class="container-fluid">
              <h6 class="card-title">2016 Easygel AVERAGE 24hr Total colony counts
                <br><small class="text-muted">Day of the week : Tuesdays, time between 10h-12h.
                <br>BDL = 'Below detectable limit', TMTC = 'Too many to count', if the box is empty there was no sample
                <br>Week one/day-one: 2016-06-21; Week eight/day-eight: 2016-08-09</small></h6>
              <table class="table table-sm m-0, p-0">
                <thead>
                  <tr>
                    <th>E.coli</th>
                    <th>Other coliform</th>
                    <th>Salmonella</th>
                    <th>Aeromonas</th>
                    <th>Unknown
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="background-color:#00008b; height:40px; width:20%"></td>
                    <td style="background-color:#1e90ff; height:40px; width:20%"></td>
                    <td style="background-color:#40e0d0; height:40px; width:20%"></td>
                    <td style="background-color:#FFC0CB; height:40px; width:20%"></td>
                    <td style="background-color:#778899; height:40px; width:20%"></td>
                  </tr>
                </tbody>
              </table>
                <img src="{% static 'images/array_2016_av.png' %}" class="img-fluid" style="min-width:400px">
              <h6 class="card-title">2017 Easygel+ UV AVERAGE 24hr Total colony counts
                <br><small class="text-muted">Day of the week : Tuesdays, time between 10h-12h.
                <br>BDL = 'Below detectable limit', TMTC = 'Too many to count', if the box is empty there was no sample
                <br>Week one/day-one: 2017-06-12; Week eight/day-eight: 2017-07-31</small></h6>
            <table class="table table-sm m-0, p-0">
              <thead>
                <tr>
                  <th>UV - E.coli</th>
                  <th>E.coli</th>
                  <th>Other coliform</th>
                  <th>Unknown</th>
                  <th>Salmonella</th>
                  <th>Aeromonas</th>
                  <th>Unknown
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="background-color:#7f1ae5; height:40px; width:14%"></td>
                  <td style="background-color:#00008b; height:40px; width:14%"></td>
                  <td style="background-color:#1e90ff; height:40px; width:14%"></td>
                  <td style="background-color:#008000; height:40px; width:14%"></td>
                  <td style="background-color:#40e0d0; height:40px; width:14%"></td>
                  <td style="background-color:#FFC0CB; height:40px; width:14%"></td>
                  <td style="background-color:#778899; height:40px; width:14%"></td>
                </tr>
              </tbody>
            </table>
                <img src="{% static 'images/array_2017.png' %}" class="img-fluid" style="min-width:400px">
            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="modal fade w-100" id="jazz_diff">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Total coliform colony counts 2016-2017 Baye de Montreux </h5>
            <button type="button" class="close align" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
            <img src="{% static 'images/jazz_dif.svg' %}" class="img-fluid" style="">
            <dl class="row mt-1">
              <dt class="col-sm-3">Interpretation of results</dt>
              <dd class="col-sm-9">
                <ul>
                  <li>
                    UV (2017 only): E.coli colonies will fluoresce under longwave UV light.
                  </li>
                  <li>
                    Big Blue: E. coli colonies will have a dark blue/purple overall colony color.
                  </li>
                  <li>
                    Med Blue: Non-fecal coliforms (Enterobacter, Citrobacter and Klebsiella spp. & others) are lighter blue/grey to purplish in color.
                  </li>
                  <li>
                    Gram-positive organisms are generally inhibited.
                  </li>
                </ul>
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
<div class="modal fade w-100" id="rain_diff">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Total coliform colony counts 2016-2017 Baye de Montreux </h5>
        <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <img src="{% static 'images/rain_dif.svg' %}" class="img-fluid" style="">
        <dl class="row mt-1">
          <dt class="col-sm-3">Interpretation of results</dt>
          <dd class="col-sm-9">
            <ul>
              <li>
                UV (2017 only): E.coli colonies will fluoresce under longwave UV light.
              </li>
              <li>
                Big Blue: E. coli colonies will have a dark blue/purple overall colony color.
              </li>
              <li>
                Med Blue: Non-fecal coliforms (Enterobacter, Citrobacter and Klebsiella spp. & others) are lighter blue/grey to purplish in color.
              </li>
              <li>
                Gram-positive organisms are generally inhibited
              </li>
            </ul>
          </dd>
        </dl>
      </div>
    </div>
  </div>
</div>


<div class="modal fade w-100" style="" id="hotel_diff">
 <div class="modal-dialog modal-lg" role="document">
   <div class="modal-content">
     <div class="modal-header">
       <h5 class="modal-title">Changes in population and coliform bacteria in lake water</h5>
       <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
     </div>
     <div class="modal-body">
       <img src="{% static 'images/hotel_dif.svg' %}" class="img-fluid" style="">
       <dl class="row mt-1">
         <dt class="col-sm-3">Interpretation of results</dt>
         <dd class="col-sm-9">
           <ul>
             <li>
               UV (2017 only): E.coli colonies will fluoresce under longwave UV light.
             </li>
             <li>
               Big Blue: E. coli colonies will have a dark blue/purple overall colony color.
             </li>
             <li>
               Med Blue: Non-fecal coliforms (Enterobacter, Citrobacter and Klebsiella spp. & others) are lighter blue/grey to purplish in color.
             </li>
             <li>
               Gram-positive organisms are generally inhibited
             </li>
           </ul>

         </dd>
       </dl>
     </div>
   </div>
 </div>
</div>
</div>

{% endblock %}


{% block charts %}
{% load static %}
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/histogram-bellcurve.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript">
var map_points = {{ map_points|safe }};
var t_cfu_17_mrd = {{ t_cfu_17_mrd|safe }};
var t_cfu_17_svt = {{ t_cfu_17_svt|safe }};
var t_cfu_17_vnx = {{ t_cfu_17_vnx|safe }};
var t_uv_17_svt = {{ t_uv_17_svt|safe }}
var t_uv_17_mrd = {{ t_uv_17_mrd|safe }}
var t_uv_17_vnx = {{ t_uv_17_vnx|safe }}
var rain_17 = {{ rain_17|safe }}
var rain_16 = {{ rain_16|safe }}
var b_blue17_svt = {{ b_blue17_svt|safe }}
var b_blue17_mrd = {{ b_blue17_mrd|safe }}
var b_blue17_vnx = {{ b_blue17_vnx|safe }}
var b_blue16_svt = {{ b_blue16_svt|safe }}
var b_blue16_mrd = {{ b_blue16_mrd|safe }}
var b_blue16_vnx = {{ b_blue16_vnx|safe }}
var t_cfu_16_mrd = {{ t_cfu_16_mrd|safe }};
var t_cfu_16_svt = {{ t_cfu_16_svt|safe }};
var t_cfu_16_vnx = {{ t_cfu_16_vnx|safe }};


var ts_plot_svt = [];
t_cfu_17_svt.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  ts_plot_svt.push({"name":element.location, "x":element.x, "y":element.y});
});
var ts_plot_mrd = [];
t_cfu_17_mrd.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  ts_plot_mrd.push({"name":element.location, "x":element.x, "y":element.y});
});
var ts_plot_vnx = [];
t_cfu_17_vnx.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  ts_plot_vnx.push({"name":element.location, "x":element.x, "y":element.y});
});
var uv_plot_svt = [];
t_uv_17_svt.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  uv_plot_svt.push({"name":element.location, "x":element.x, "y":element.y});
});
var uv_plot_mrd = [];
t_uv_17_mrd.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  uv_plot_mrd.push({"name":element.location, "x":element.x, "y":element.y});
});
var uv_plot_vnx = [];
t_uv_17_vnx.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  uv_plot_vnx.push({"name":element.location, "x":element.x, "y":element.y});
});
var rain17 = [];
rain_17.forEach(function(element){
  element[0] = Date.parse(element[0]);
  element[1] = parseFloat(element[1]);
  rain17.push([element[0], element[1]]);
});
var rain16 = [];
rain_16.forEach(function(element){
  element[0] = Date.parse(element[0]);
  element[1] = parseFloat(element[1]);
  rain16.push([element[0], element[1]]);
});

var b_b17_mrd = [];
b_blue17_mrd.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  b_b17_mrd.push({"name":element.location, "x":element.x, "y":element.y});
});
var b_b17_svt = [];
b_blue17_svt.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  b_b17_svt.push({"name":element.location, "x":element.x, "y":element.y});
});
var b_b17_vnx = [];
b_blue17_vnx.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  b_b17_vnx.push({"name":element.location, "x":element.x, "y":element.y});
});
var b_b16_mrd = [];
b_blue16_mrd.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  b_b16_mrd.push({"name":element.location, "x":element.x, "y":element.y});
});
var b_b16_svt = [];
b_blue16_svt.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  b_b16_svt.push({"name":element.location, "x":element.x, "y":element.y});
});
var b_b16_vnx = [];
b_blue16_vnx.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  b_b16_vnx.push({"name":element.location, "x":element.x, "y":element.y});
});
var t_16_svt = [];
t_cfu_16_svt.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  t_16_svt.push({"name":element.location, "x":element.x, "y":element.y});
});
var t_16_mrd = [];
t_cfu_16_mrd.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  t_16_mrd.push({"name":element.location, "x":element.x, "y":element.y});
});
var t_16_vnx = [];
t_cfu_16_vnx.forEach(function(element){
  element.x = Date.parse(element.x);
  element.y = parseFloat(element.y);
  t_16_vnx.push({"name":element.location, "x":element.x, "y":element.y});
});



</script>
<script type="text/javascript">


$(document).ready(function() {

  $('.shutterTitle').click(function() {
    var parentTag = $( this ).parent();
    var this_height = $(this);
    var this_child = $(this).children()[1];
    console.log(this_child);

    $( parentTag ).each(function(i){
      if ($(parentTag).hasClass('close-animate') || !$(parentTag).hasClass('shutterExpanded')) {
      console.log(this);
      $(this_height ).css("height", "auto");
      $(this_height).addClass('text-right');
      $(this_height).addClass('pr-3');
      $(this_height).removeClass('p-1');
      // $(this_child).addClass('text-right');
      $(parentTag).removeClass('close-animate').addClass('shutterExpanded');
      $('.wrapper').addClass('shutterOpen');
      console.log(this_child)

    } else {
      console.log("Else");
      $(this).removeClass('shutterExpanded').addClass('close-animate');
      $(this_height).removeClass('text-right');
      $(this_height).removeClass('pr-3');
      $(this_height).addClass('p-1');
      $(this_height ).css("height", "100%");
      $('.wrapper').removeClass('shutterOpen');
      console.log(this);
    }
  });
})}
);
</script>
<script type="text/javascript">
var map;
var styledMapType;
function initMap() {
  styledMapType = new google.maps.StyledMapType([
  {
    "featureType": "administrative",
    "elementType": "geometry",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "administrative.land_parcel",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "administrative.locality",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#313026"
      }
    ]
  },
  {
    "featureType": "administrative.locality",
    "elementType": "geometry.stroke",
    "stylers": [
      {
        "color": "#313026"
      }
    ]
  },
  {
    "featureType": "administrative.neighborhood",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "poi",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.local",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "transit",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#00cdff"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  }
],
{name:'Location of microbiological surveys 2016 - 2017'});
  map = new google.maps.Map(document.getElementById('maps'), {
    zoom:12,
    center: {lat: 46.438233, lng: 6.905199},
    minZoom:8,
    mapTypeControlOptions: {
      mapTypeIds: ['styled_map'],
    },
    streetViewControl:false,
    fullscreenControl:false,

  });
  map.mapTypes.set('styled_map', styledMapType);
  map.setMapTypeId('styled_map');

  var infowindow = new google.maps.InfoWindow();
  var marker, i;
  var markers = [];


  for (i = 0; i < map_points.length; i++) {
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(map_points[i].latitude, map_points[i].longitude),
      // console.log()
      map: map,

      icon:  {
        path: google.maps.SymbolPath.CIRCLE,
        scale: 10,
        fillColor: 'rgb(255, 65, 168)',
        strokeColor: 'rgb(255, 00, 00)',
        fillOpacity:0.6,
        strokeOpacity:1,
        strokeWeight:2,
      },



    });

    var contentString = '<div><p style="margin-bottom:4px; font-size:14px;">' + map_points[i].location +  '</p><ul><li>City: ' + map_points[i].city + '</li><li> N<sup>o</sup> of samples: ' + map_points[i].num_samps + '</li><li> First sample: ' + map_points[i].first_samp + '</li</ul></div>';

    marker.addListener('click', function(content){
      return function(){
        infowindow.setContent(content);
        infowindow.open(map, this);
      }
    }(contentString));
    markers.push(marker);

    map.mapTypes.set('styled_map', styledMapType);

    map.setMapTypeId('styled_map');

  };

   };
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAm40jm5y3TNXHeagBkulq-mS2A3ep4TWY&callback=initMap"  async defer> </script>

</script>
<script type="text/javascript">
Highcharts.chart('box-plot', {

    chart: {
        type: 'line',
        spacingBottom: 20,
    },

    title: {
        text: '',
        style:{
          fontSize: '14px',
          color:'#0A2E5C',

        },
    },
    subtitle: {
      text: '',
      style:{
        fontSize: '10px',
        color:'#0A2E5C',
      }

    },
    credits:{
      text:'hammerdirt 2018',

    },
    exporting: {
      enabled:false,
    },
    legend: {
      enabled: true,
      verticalAlign: 'top',
      horizontalAlign: 'left',
      layout:'vertical',
      floating:true,
      x:-80,
      y:30,
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .5)',
      borderWidth:2,
      itemMarginTop:4,
      itemMarginBottom:4,
      itemStyle:{
        color: 'black',
        fontSize: '10px',
      },
    },
    plotOptions:{
      series:{
        marker: {
          enabled: false
        },
        label:{
          enabled: false
        },
      },


    },

    xAxis: [{
      type: 'datetime',

      tickInterval:null,
      tickColor:'rgba(00, 00, 00, 1)',
      labels: {
        enabled: true,
        style: {
          color:'rgba(00, 00, 00, 1)',
        }
      },
      dateTimeLabelFormats: {
        month: '%b-%d',
      },
    },
  ],
    yAxis: [{
      min:0,
      tickInterval:400,
      minPadding:0.2,
      title: {
          align: 'low',
          offset: 50,
          text: 'Average total CFU per 100mL',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
      gridLineColor:'rgba(10, 46, 92, .2)',
      minorTickInterval:20,
      minorGridLineColor:'rgba(10, 46, 92, .1)',
      minorGridLineDashStyle:'longdash',
      minorGridLineWidth:1,
      minorTickWidth: 1,
      labels:{
        style: {
          color:'rgba(00, 00, 00, 1)',
          fontSize: '10px'
        }
      },

      },
      {
      min:0,
      // tickInterval:100,
      minPadding:0.2,
      title: {
          align: 'middle',
          rotation: 270,
          offset: 50,
          text: 'Daily rainfall in centimeters',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
      // gridLineColor:'rgba(10, 46, 92, 0.2)',
      // minorTickInterval:20,
      // minorGridLineColor:'rgba(10, 46, 92, .2)',
      // minorGridLineDashStyle:'longdash',
      // minorGridLineWidth:1,
      // minorTickWidth: 1,
      opposite:true,
    }
  ],

    series:
    [{
      zIndex:3,
      xAxis:0,
      yAxis:0,
      type: 'line',
      name: 'Quai de Vernex',
      color:'#18c4d8',
      lineWidth:2,
      marker:{
        enabled:false
      },
      data: ts_plot_svt,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      }},
      {
        zIndex:3,
        xAxis:0,
        yAxis:0,
        type: 'line',
        name: 'Montreux - marché',
        color:'#1bb35e',
        lineWidth:2,
        marker:{
          enabled:false
        },
        data: ts_plot_mrd,
        tooltip: {
            headerFormat: '<em>{point.key}</em><br/>'
        }},
        {
          zIndex:3,
          xAxis:0,
          yAxis:0,
          type: 'line',
          name: 'Parc de Vernex',
          color:'#ffb100',
          lineWidth:2,
          marker:{
            enabled:false
          },
          data: ts_plot_vnx,
          tooltip: {
              headerFormat: '<em>{point.key}</em><br/>'
          }},
          {
            zIndex:3,
            xAxis:0,
            yAxis:1,
            type: 'area',
            name: 'Rainfall',
            color:'rgba(00, 00, 00, .2)',
            fillColor:'rgba(00, 00, 00, .2)',
            lineColor:'rgba(00, 00, 00, .2)',
            lineWidth:0,
            marker:{
              enabled:false
            },
            data: rain17,
            tooltip: {
                headerFormat: '<em>{point.key}</em><br/>'
            }},
          ]

});
</script>
<script type="text/javascript">
Highcharts.chart('box-plot2', {

    chart: {
        type: 'line',
        spacingBottom: 20,
    },

    title: {
        text: '',
        style:{
          fontSize: '14px',
          color:'#0A2E5C',

        },
    },
    subtitle: {
      text: '',
      style:{
        fontSize: '10px',
        color:'#0A2E5C',
      }

    },
    credits:{
      text:'hammerdirt 2018',

    },
    exporting: {
      enabled:false,
    },
    legend: {
      enabled: true,
      verticalAlign: 'top',
      horizontalAlign: 'right',
      layout:'vertical',
      floating:true,
      x:200,
      y:30,
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .5)',
      borderWidth:2,
      itemMarginTop:4,
      itemMarginBottom:4,
      itemStyle:{
        color: 'black',
        fontSize: '10px',
      },
    },
    plotOptions:{
      series:{
        marker: {
          enabled: false
        },
        label:{
          enabled: false
        },
      },


    },

    xAxis: [{
      type: 'datetime',
      tickInterval:null,
      tickColor:'rgba(00, 00, 00, 1)',
      labels: {
        enabled: true,
        style: {
          color:'rgba(00, 00, 00, 1)',
        }
      },
      dateTimeLabelFormats: {
        month: '%b-%d',
      },
    },
  ],
    yAxis: [{
      min:0,
      tickInterval:100,
      minPadding:0.2,
      title: {
          align: 'low',
          offset: 50,
          text: 'Average total Ultraviolet CFU per 100mL',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
      gridLineColor:'rgba(10, 46, 92, .2)',
      minorTickInterval:20,
      minorGridLineColor:'rgba(10, 46, 92, .1)',
      minorGridLineDashStyle:'longdash',
      minorGridLineWidth:1,
      minorTickWidth: 1,
    },{
      min:0,
      minPadding:0.2,
      title: {
          align: 'middle',
          rotation: 270,
          offset: 50,
          text: 'Daily rainfall in centimeters',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
    opposite:true,
    }



  ],

    series:
    [{
      zIndex:3,
      xAxis:0,
      yAxis:0,
      type: 'line',
      name: 'Quai de Vernex',
      color:'#18c4d8',
      lineWidth:2,
      marker:{
        enabled:false
      },
      data: uv_plot_svt,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      }},
      {
        zIndex:3,
        xAxis:0,
        yAxis:0,
        type: 'line',
        name: 'Montreux - marché',
        color:'#1bb35e',
        lineWidth:2,
        marker:{
          enabled:false
        },
        data: uv_plot_mrd,
        tooltip: {
            headerFormat: '<em>{point.key}</em><br/>'
        }},
        {
          zIndex:3,
          xAxis:0,
          yAxis:0,
          type: 'line',
          name: 'Parc de Vernex',
          color:'#ffb100',
          lineWidth:2,
          marker:{
            enabled:false
          },
          data: uv_plot_vnx,
          tooltip: {
              headerFormat: '<em>{point.key}</em><br/>'
          }},
          {
            zIndex:3,
            xAxis:0,
            yAxis:1,
            type: 'area',
            name: 'Rainfall',
            color:'rgba(00, 00, 00, .2)',
            fillColor:'rgba(00, 00, 00, .2)',
            lineColor:'rgba(00, 00, 00, .2)',
            lineWidth:0,
            marker:{
              enabled:false
            },
            data: rain17,
            tooltip: {
                headerFormat: '<em>{point.key}</em><br/>'
            }}

    ]

});
</script>
<script type="text/javascript">
Highcharts.chart('box-plot3', {

    chart: {
        type: 'line',
        spacingBottom: 20,
    },

    title: {
        text: '',
        style:{
          fontSize: '14px',
          color:'#0A2E5C',

        },
    },
    subtitle: {
      text: '',
      style:{
        fontSize: '10px',
        color:'#0A2E5C',
      }

    },
    credits:{
      text:'hammerdirt 2018',

    },
    exporting: {
      enabled:false,
    },
    legend: {
      enabled: true,
      verticalAlign: 'top',
      horizontalAlign: 'right',
      layout:'vertical',
      floating:true,
      x:200,
      y:30,
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .5)',
      borderWidth:2,
      itemMarginTop:4,
      itemMarginBottom:4,
      itemStyle:{
        color: 'black',
        fontSize: '10px',
      },
    },
    plotOptions:{
      series:{
        marker: {
          enabled: false
        },
        label:{
          enabled: false
        },
      },


    },

    xAxis: [{
      type: 'datetime',
      tickInterval:null,
      tickColor:'rgba(00, 00, 00, 1)',
      labels: {
        enabled: true,
        style: {
          color:'rgba(00, 00, 00, 1)',
        }
      },
      dateTimeLabelFormats: {
        month: '%b-%d',
      },
    },
  ],
    yAxis: [{
      min:0,
      tickInterval:100,
      minPadding:0.2,
      title: {
          align: 'low',
          offset: 50,
          text: 'Average total Big Blue CFU per 100mL',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
      gridLineColor:'rgba(10, 46, 92, .2)',
      minorTickInterval:20,
      minorGridLineColor:'rgba(10, 46, 92, .1)',
      minorGridLineDashStyle:'longdash',
      minorGridLineWidth:1,
      minorTickWidth: 1,
    },{
      min:0,
      minPadding:0.2,
      title: {
          align: 'middle',
          rotation: 270,
          offset: 50,
          text: 'Daily rainfall in centimeters',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
    opposite:true,
    }



  ],

    series:
    [{
      zIndex:3,
      xAxis:0,
      yAxis:0,
      type: 'line',
      name: 'Quai de Vernex',
      color:'#18c4d8',
      lineWidth:2,
      marker:{
        enabled:false
      },
      data: b_b17_svt,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      }},
      {
        zIndex:3,
        xAxis:0,
        yAxis:0,
        type: 'line',
        name: 'Montreux - marché',
        color:'#1bb35e',
        lineWidth:2,
        marker:{
          enabled:false
        },
        data: b_b17_mrd,
        tooltip: {
            headerFormat: '<em>{point.key}</em><br/>'
        }},
        {
          zIndex:3,
          xAxis:0,
          yAxis:0,
          type: 'line',
          name: 'Parc de Vernex',
          color:'#ffb100',
          lineWidth:2,
          marker:{
            enabled:false
          },
          data: b_b17_vnx,
          tooltip: {
              headerFormat: '<em>{point.key}</em><br/>'
          }},
          {
            zIndex:3,
            xAxis:0,
            yAxis:1,
            type: 'area',
            name: 'Rainfall',
            color:'rgba(00, 00, 00, .2)',
            fillColor:'rgba(00, 00, 00, .2)',
            lineColor:'rgba(00, 00, 00, .2)',
            lineWidth:0,
            marker:{
              enabled:false
            },
            data: rain17,
            tooltip: {
                headerFormat: '<em>{point.key}</em><br/>'
            }}

    ]

});
</script>
<script type="text/javascript">
Highcharts.chart('box-plot4', {

    chart: {
        type: 'line',
        spacingBottom: 20,
    },

    title: {
        text: '',
        style:{
          fontSize: '14px',
          color:'#0A2E5C',

        },
    },
    subtitle: {
      text: '',
      style:{
        fontSize: '10px',
        color:'#0A2E5C',
      }

    },
    credits:{
      text:'hammerdirt 2018',

    },
    exporting: {
      enabled:false,
    },
    legend: {
      enabled: true,
      verticalAlign: 'top',
      horizontalAlign: 'right',
      layout:'vertical',
      floating:true,
      x:200,
      y:30,
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .5)',
      borderWidth:2,
      itemMarginTop:4,
      itemMarginBottom:4,
      itemStyle:{
        color: 'black',
        fontSize: '10px',
      },
    },
    plotOptions:{
      series:{
        marker: {
          enabled: false
        },
        label:{
          enabled: false
        },
      },


    },

    xAxis: [{
      type: 'datetime',
      tickInterval:null,
      tickColor:'rgba(00, 00, 00, 1)',
      labels: {
        enabled: true,
        style: {
          color:'rgba(00, 00, 00, 1)',
        }
      },
      dateTimeLabelFormats: {
        month: '%b-%d',
      },
    },
  ],
    yAxis: [{
      min:0,
      tickInterval:100,
      minPadding:0.2,
      title: {
          align: 'low',
          offset: 50,
          text: 'Average total CFU per 100mL',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
      gridLineColor:'rgba(10, 46, 92, .2)',
      minorTickInterval:20,
      minorGridLineColor:'rgba(10, 46, 92, .1)',
      minorGridLineDashStyle:'longdash',
      minorGridLineWidth:1,
      minorTickWidth: 1,
    },{
      min:0,
      minPadding:0.2,
      title: {
          align: 'middle',
          rotation: 270,
          offset: 50,
          text: 'Daily rainfall in centimeters',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
    opposite:true,
    }



  ],

    series:
    [{
      zIndex:3,
      xAxis:0,
      yAxis:0,
      type: 'line',
      name: 'Quai de Vernex',
      color:'#18c4d8',
      lineWidth:2,
      marker:{
        enabled:false
      },
      data: t_16_svt,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      }},
      {
        zIndex:3,
        xAxis:0,
        yAxis:0,
        type: 'line',
        name: 'Montreux - marché',
        color:'#1bb35e',
        lineWidth:2,
        marker:{
          enabled:false
        },
        data: t_16_mrd,
        tooltip: {
            headerFormat: '<em>{point.key}</em><br/>'
        }},
        {
          zIndex:3,
          xAxis:0,
          yAxis:0,
          type: 'line',
          name: 'Parc de Vernex',
          color:'#ffb100',
          lineWidth:2,
          marker:{
            enabled:false
          },
          data: t_16_vnx,
          tooltip: {
              headerFormat: '<em>{point.key}</em><br/>'
          }},
          {
            zIndex:3,
            xAxis:0,
            yAxis:1,
            type: 'area',
            name: 'Rainfall',
            color:'rgba(00, 00, 00, .2)',
            fillColor:'rgba(00, 00, 00, .2)',
            lineColor:'rgba(00, 00, 00, .2)',
            lineWidth:0,
            marker:{
              enabled:false
            },
            data: rain16,
            tooltip: {
                headerFormat: '<em>{point.key}</em><br/>'
            }}

    ]

});
</script>
<script type="text/javascript">
Highcharts.chart('box-plot5', {

    chart: {
        type: 'line',
        spacingBottom: 20,
    },

    title: {
        text: '',
        style:{
          fontSize: '14px',
          color:'#0A2E5C',

        },
    },
    subtitle: {
      text: '',
      style:{
        fontSize: '10px',
        color:'#0A2E5C',
      }

    },
    credits:{
      text:'hammerdirt 2018',

    },
    exporting: {
      enabled:false,
    },
    legend: {
      enabled: true,
      verticalAlign: 'top',
      horizontalAlign: 'right',
      layout:'vertical',
      floating:true,
      x:200,
      y:30,
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .5)',
      borderWidth:2,
      itemMarginTop:4,
      itemMarginBottom:4,
      itemStyle:{
        color: 'black',
        fontSize: '10px',
      },
    },
    plotOptions:{
      series:{
        marker: {
          enabled: false
        },
        label:{
          enabled: false
        },
      },


    },

    xAxis: [{
      type: 'datetime',
      tickInterval:null,
      tickColor:'rgba(00, 00, 00, 1)',
      labels: {
        enabled: true,
        style: {
          color:'rgba(00, 00, 00, 1)',
        }
      },
      dateTimeLabelFormats: {
        month: '%b-%d',
      },
    },
  ],
    yAxis: [{
      min:0,
      tickInterval:200,
      minPadding:0.2,
      title: {
          align: 'low',
          offset: 50,
          text: 'Average total Big Blue CFU per 100mL',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
      gridLineColor:'rgba(10, 46, 92, .2)',
      minorTickInterval:20,
      minorGridLineColor:'rgba(10, 46, 92, .1)',
      minorGridLineDashStyle:'longdash',
      minorGridLineWidth:1,
      minorTickWidth: 1,
    },{
      min:0,
      minPadding:0.2,
      title: {
          align: 'middle',
          rotation: 270,
          offset: 50,
          text: 'Daily rainfall in centimeters',
          style:{
            fontSize: '14px',
            color:'#000000',
          },
      },
    opposite:true,
    }



  ],

    series:
    [{
      zIndex:3,
      xAxis:0,
      yAxis:0,
      type: 'line',
      name: 'Quai de Vernex',
      color:'#18c4d8',
      lineWidth:2,
      marker:{
        enabled:false
      },
      data: b_b16_svt,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      }},
      {
        zIndex:3,
        xAxis:0,
        yAxis:0,
        type: 'line',
        name: 'Montreux - marché',
        color:'#1bb35e',
        lineWidth:2,
        marker:{
          enabled:false
        },
        data: b_b16_mrd,
        tooltip: {
            headerFormat: '<em>{point.key}</em><br/>'
        }},
        {
          zIndex:3,
          xAxis:0,
          yAxis:0,
          type: 'line',
          name: 'Parc de Vernex',
          color:'#ffb100',
          lineWidth:2,
          marker:{
            enabled:false
          },
          data: b_b16_vnx,
          tooltip: {
              headerFormat: '<em>{point.key}</em><br/>'
          }},
          {
            zIndex:3,
            xAxis:0,
            yAxis:1,
            type: 'area',
            name: 'Rainfall',
            color:'rgba(00, 00, 00, .2)',
            fillColor:'rgba(00, 00, 00, .2)',
            lineColor:'rgba(00, 00, 00, .2)',
            lineWidth:0,
            marker:{
              enabled:false
            },
            data: rain16,
            tooltip: {
                headerFormat: '<em>{point.key}</em><br/>'
            }}

    ]

});
</script>


{% endblock %}
