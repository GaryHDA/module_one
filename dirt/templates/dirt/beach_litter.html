{% extends "dirt/temp_one.html" %}

{% block style %}

<!-- p, ul, li {
  font-size: 14px;
} -->

.txt-12 {
  font-size: 12px;
}

.txt-14 {
  font-size: 14px;
}
.bg-red {
  background-color: rgba(199, 31, 22, 1);

}
.col-sm{
  min-width:380px;
}

.wide-88 {
  width:88px;
  height:88px;
}
.wrapper {
  position: relative;
  display: block;
  width: 100%;
  height: 100%;
  overflow: hidden;
  transition: all .3s linear;
}

.shutter {
  position: relative;
  display: block;
  width: 33%;

  height: 16%;
  background: #fff;
  box-sizing: border-box;
  border-top: 1px solid #ffffff;
  transition: all .3s linear;
  cursor: pointer;
  overflow: hidden;
  z-index: 5;
  box-sizing: border-box;
  text-align: center;
  color: #000;
}

#whynot{
  width:80%;
  height:20%;
}
.bttn{
  width:100%;
  height:100%;
}
#why {
  width:50%;
  height:100%;
}
@media  (max-width: 767.98px) {
  .shutter{
    width: 100%;
    height: 20%;
  }
  <!-- .col-sm-4 {
    width: 100%;

  }; -->
}
@media  (max-width: 767.98px) {
  #whynot {
    width:100%;
    height:30%;

  };
  <!-- .bttn{
    width:33%;
  } -->
}

@media  (max-width: 767.98px) {
  #why {
    width:100%;
    height:100%;

  };
  <!-- .bttn{
    width:33%;
  } -->
}

<!-- @media  (max-width: 767.98px) {
  .bttn{
    width:100%;

  } -->

  }
.shutterOpen .shutter {
  height: 0;
}

.shutter.shutterExpanded {
  height: 100%;
  width:100%;
  overflow:auto;
  <!-- width:100%; -->
}

{% endblock %}


{% block content  %}
{% load humanize %}
{% load static %}
<div class="container-fluid p-0 m-0" style="height:100vh; width:100%">
  <div class="wrapper p-0  mx-auto" style="height:100%">
    <div class="shutter mx-auto" >
      <div class="row bg-dark p-1"  style="height:100%" >
        <h5 class="w-100 text-white">Welcome to the beach-litter section<br>
        <small class="text-left">Click on a tab below to get started.<br> If you have any questions contact us.</small></h5>
      </div>
    </div>


    <div class="shutter mx-auto" id="read_me">
      <div class="row no-gutters bg-info shutterTitle"  style="height:100%" >
        <h5 class=" p-0 w-100 text-white mb-0"> --> Read me first <-- <br>
          <small class="text-left">If you can't define "beach-litter-inventory", then this is a good place to start.</small></h5>
      </div>
      <div class="row no-gutters" style="height:100%">
        <div class="col-sm" id='bg' style="">
          <div class="card pb-0 mx-auto" id="why" style="" >
            <div class="card-header m-0 w-100 bg-dark text-left" id="" style="">
              <h4 class="text-white">Why is this important? <br><small class="text-white">Beach litter and trash in the water is a fact of life.</small> </h4>
            </div>
            <div class="card-body p-1 w-100 text-left" >
              <div id="whynot" class="container mx-auto mb-2">
                <div class="row no-gutters" style="height:50%">
                  <div class="col-sm-4 p-0 m-0">
                    <a class="btn bttn bg-info text-white p-1 m-0 border-white" style="white-space:normal;" data-toggle="modal"  data-target="#bl_30" aria-expanded="false" aria-controls="table-of-results">
                       Measuring beach litter
                    </a>
                  </div>
                  <div class="col-sm-4 p-0 m-0">
                    <a class="btn bttn bg-info text-white p-1 m-0 border-white" style="white-space:normal;" data-toggle="modal" data-target="#mcbp-1" aria-expanded="false" aria-controls="">
                       MCBP-1: 2014-2015
                    </a>
                  </div>
                  <div class="col-sm-4 p-0 m-0" >
                    <a class="btn bttn bg-info text-white m-0 p-1 border-white" style="white-space:normal;" data-toggle="modal"  data-target="#mcbp-2" aria-expanded="false" aria-controls="">
                       MCBP-2: 2015-2016
                    </a>
                  </div>
                </div>
                <div class="row no-gutters" style="height:50%">
                  <div class="col-sm-4 p-0 m-0">
                    <a class="btn bttn bg-info text-white m-0 p-1 border-white" style="white-space:normal;" data-toggle="modal"  data-target="#mcbp-3" aria-expanded="false" aria-controls="table-of-results">
                       MCBP-3: 2016-2017
                    </a>
                  </div>
                  <div class="col-sm-4 p-0 m-0">
                    <a class="btn bttn bg-info text-white m-0 p-1 border-white" style="white-space:normal;" data-toggle="modal"  data-target="#mcbp-4" aria-expanded="false" aria-controls="">
                       MCBP-4: 2018-?
                    </a>
                  </div>
                  <div class="col-sm-4 p-0 m-0">
                    <a class="btn bttn bg-info text-white m-0 p-1 border-white" style="white-space:normal;" data-toggle="modal"  data-target="#slr" aria-expanded="false" aria-controls="table-of-results">
                       Swiss Litter Report
                    </a>
                  </div>
                </div>
              </div>
              <div class="list-group ">
                <div class="list-group-item flex-column align-items-start mt-2">
                  <div class="d-flex w-100 justify-content-between ">
                    <h6 class="mb-1"> Water is better without trash
                      <br><small class="text-muted">A clean beach is a good thing, it is a guaranteed value.
                        <br>The most obvious benefits from projects like this is the removal of trash from the environment.</small></h6>
                  </div>
                </div>
                <div class="list-group-item flex-column align-items-start">
                  <div class="d-flex w-100 justify-content-between">
                    <h6 class="mb-1"> Pragmatic action
                      <br><small class="text-muted">A sure way to limit the damage
                      <br>The data we collect may lead to a solution tomorow, but removing trash now is for today.</small></h6>
                  </div>
                </div>
                <div class="list-group-item flex-column align-items-start">
                  <div class="d-flex w-100 justify-content-between">
                    <h6 class="mb-1"> Management tool
                      <br><small class="text-muted">How else are you going to know what is out there ?
                      <br>If you intend on managing it, then you need to measure it.</small></h6>
                  </div>
                </div>
                <div class="d-flex w-100 align-items-center justify-content-center">
                  <div class="btn m-1 wide-88 d-inline-flex align-items-center justify-content-center rounded-circle bg-red">
                    <a class="text-white txt-14" href="{% url 'slr_home' %}" aria-expanded="false"> SLR<br> Results </a>
                  </div>
                  <div class="btn m-1 wide-88 d-inline-flex align-items-center justify-content-center rounded-circle bg-red">
                    <a class="text-white  txt-14" href="{% url 'mcbp_home' %}" aria-expanded="false"> MCBP<br> Results </a>
                  </div>
                  <div class="btn m-1 wide-88 d-inline-flex align-items-center justify-content-center rounded-circle bg-red">
                    <a class="text-white txt-14" href="{% url 'hdc_home' %}" aria-expanded="false"> California<br> Results </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="shutter mx-auto" id="combined_data">
      <div class="row no-gutters bg-info shutterTitle" style="height:100%" >
        <h5 class="w-100 text-white">Combined data 2015 to {{ t_day|date:"Y" }}<br>
        <small class="text-left p-1">Descriptive statistics, maps, time-series charts.
          Categorized by city, water-body, or project.</small></h5>
      </div>
      <div class="row no-gutters" id='cd' style="height:100% ">
        <div class="col-sm" id='cd_0' style="height:100%">
          <div class="card pb-0" id="cd_1" style="height:100%">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              Summary:
            </div>
            <div class="card-body p-0 text-left" style="height:100%">
              <h6 class="card-title"> Summary of all data for Switzerland on record
                <br><small class="text-muted">Averages not weighted
                <br>Units= pcs/m</small></h6>
              <table class="table table-sm table-striped text-left mb-0 txt-12"  style="height:24%">
                <tbody>
                    <td class="ml-auto">N<sup>o</sup> of Samples:</td>
                    <td class="mr-auto">{{ summary.num_samps|floatformat:0|intcomma }}</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">N<sup>o</sup> of locations:</td>
                    <td class="mr-auto">{{ num_locs|floatformat:0 }}</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">N<sup>o</sup> of rivers - lakes:</td>
                    <td class="mr-auto">{{ num_rivers|floatformat:0 }} - {{ num_lakes|floatformat:0 }}</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">First sample date:</td>
                    <td class="mr-auto">{{ summary.first|date:"M Y" }}</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">Most recent sample:</td>
                    <td class="mr-auto">{{ summary.last|date:"M Y" }}</td>
                  </tr>
                </tbody>
              </table>
              <button class="btn bg-info w-100 p-2 pl-3 text-white text-left border-white" style="height:8%"  role="button" data-toggle="modal" data-target="#water_search" aria-expanded="false" aria-controls="">
                Search by city, body of water or project</button>

              <table class="table table-sm table-striped text-left mb-0 txt-12"  style="height:24%">
                <tbody>
                  <tr>
                    <td class="ml-auto">N<sup>o</sup> of pieces of garbage:</td>
                    <td class="mr-auto">{{ summary.total|floatformat:0|intcomma }}</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">Avg pieces/meter (pcs/m):</td>
                    <td class="mr-auto">{{ summary.ave_dense|floatformat:2 }} pcs/m</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">Standard deviation</td>
                    <td class="mr-auto">{{ summary.stan_dev|floatformat:2 }}</td>
                    </tr>
                  <tr>
                    <td class="ml-auto">25<sup>th</sup> percentile</td>
                    <td class="mr-auto">{{ summary.two_five|floatformat:2 }} pcs/m</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">75<sup>th</sup> percentile</td>
                    <td class="mr-auto"> {{ summary.seven_five|floatformat:2 }} pcs/m</td>
                  </tr>
                  <tr>
                    <td class="ml-auto">Min - Max pcs/m :</td>
                    <td class="mr-auto"> {{ summary.min_dense|floatformat:4 }} - {{ summary.max_dense|floatformat:2 }}</td>
                  </tr>
                </tbody>
              </table>
              <!-- <div class="btn-toolbar">
                <div class="btn-group" style="height:10%" > -->
              <button class="btn bg-info w-100 p-2 pl-3 text-white text-left border-white" style="height:8%" role="button" data-toggle="modal" data-target="#lakes_rivers" aria-expanded="false" aria-controls="">
                  See list of lakes and rivers</button>

              <button class="btn bg-info p-2 pl-3 text-white text-left border-white w-100" style="height:8%" data-toggle="modal"  data-target="#sum_data" aria-expanded="false" aria-controls="table-of-results">
                Top-ten, material type</button>
              <button class="btn bg-info p-2 pl-3 text-white text-left border-white w-100"  style="height:8%" data-toggle="modal" data-target="#sun_shine" aria-expanded="false" aria-controls="">
                  Inventory of all items</button>
                <!-- </div>
              </div> -->

            </div>
          </div>
        </div>
        <div class="col-sm" id="cd_01"  style="">
          <div class="card pb-0" id="cd_9"  style="height:100%">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              Location of beach liiter surveys:
            </div>
            <div class="card-body p-0 text-left"  style="height:100%">
              <h6 class="card-title">Map of all beach litter surveys reported
                <br><small class="text-muted">Units= pcs/m, circle size relative to avg pcs/m
                <br>Use buttons below to select major categories</small></h6>
              <div id="combined_map_all" class="" style="height:76%; min-height:460px"></div>
              <div class="btn-toolbar float-right">
                <div class="btn-grp w-100" style="height:14%">
                  <button id="lake" class="btn p-2 mt-1 bg-info text-white" style="" type="submit" value="lake">lake</button>
                  <button id="SLR" class="btn p-2 mt-1 bg-info text-white" style="" type="submit" value="SLR">SLR</button>
                  <button id="river" class="btn p-2 mt-1 bg-info text-white" style="" type="submit" value="rivers">Rivers</button>
                  <button id="MCBP" class="btn p-2 mt-1 bg-info text-white" style="" type="submit" value="MCBP">MCBP</button>
                  <button id="all" class="btn p-2 mt-1 bg-info text-white" style="" type="submit" value="all">See all locations</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm" id="cd_02"  style="height:100%" >
          <div class="card pb-0" id="cd_10"  style="height:100%">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              <i class="fa fa-line-chart fa-lg"></i>&nbsp; Plot of all litter surveys 2015 to {{ t_day|date:"b-Y"}}:
            </div>
            <div class="card-body p-0 text-left"  style="height:100%">
              <h6 class="card-title"> Combined results of all volunteer surveys <br><small class="text-muted">Units= pcs/m, Zoom date with click and drag in chart area<br> Activate/deactivate items in the legend</small></h6>
              <div id="combined-ts" class="w-100" style="height: 76%; min-height: 460px;"></div>
              <button class="btn bg-info w-100 p-2 pl-3 text-white text-left" role="button" data-toggle="modal" data-target="#box_one" aria-expanded="false" aria-controls="">
                    This chart : subdued colors, more detail ++ bigger
              </button>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="shutter mx-auto" id="prob_garbage">
      <div class="row no-gutters bg-info shutterTitle" style="height:100%">
        <h5 class="w-100 text-white">The probability of garbage<br>
        <small class="text-left p-1">Comparing year over year probability distributions of trash survey results on Lac Léman</small></h5>
      </div>
      <div class="row no-gutters" id='gb' style="height:100% ">
        <div class="col-sm" id='gb_0' style="height:100%">
          <div class="card pb-0" id="">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              Beach litter is a probability
            </div>
            <div class="card-body text-left" style="height:100%">
              <h6 class="card-title">Understanding how trash gets in the water
                <br><small class="text-muted">Log normal distribution
                <br>Allows for the application of standard analysis techniques</small></h6>
              <p>The scatter plot for Lac Léman 2015 - 2017 displays the results, grouped by year (Nov - Nov). There are a couple of differnces between the two sample groups</p>
              <ul>
                <li> The samples for 2015 were collected by three - four people (hammerdirt staff)</li>
                <li> The samples for 2017 were collected by many people from four distinct groups </li>
                <li> The samples gathered by hammerdirt staff counted all trash with no lower size limit</li>
                <li> The samples gathered by SLR volunteers did not count objects less than 2.5cm</li>
              </ul>
              <p>Despite these differences the results vary only in maximum and minumum values. The criteria for counting (limiting the lower size limit) does not really effect the mid range of the results.
                 Most of the results fall within 1.2 and 13 pcs/m.</p>
              <p>It is safe to say that these numbers are minimum values. Furthermore we round the results to no less than 0.0001 pcs/m (we figure that anything beyond that is not signifigant)</p>
              <p>The cutoff date for each year is November 15, thats the week the project started in 2015.</p>
            </div>

          </div>
          <!-- <div class="card-block align-items-center pb-0 pt-1">
            <div class="btn mx-auto wide-88 d-inline-flex  align-items-center justify-content-center rounded-circle bg-red">
              <a class="text-white txt-14" href="{% url 'mcbp_home' %}">All <br> Results </a>
            </div>
            <div class="btn mx-auto wide-88 d-inline-flex align-items-center justify-content-center rounded-circle bg-red">
              <a class="text-white txt-14" href="{% url 'slr_home' %}" aria-expanded="false"> SLR<br> Results </a>
            </div>
            <div class="btn mx-auto wide-88 d-inline-flex align-items-center justify-content-center rounded-circle bg-red">
              <a class="text-white txt-14" href="#" aria-expanded="false"> MCBP<br> Results </a>
            </div>
            <div class="btn mx-auto wide-88 d-inline-flex align-items-center justify-content-center rounded-circle bg-red">
              <a class="text-white txt-14" href="#" aria-expanded="false"> California<br> Results </a>
            </div>
          </div> -->
        </div>
        <div class="col-sm" id='gb_1' style="height:100%">
          <div class="card pb-0">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              <i class="fa fa-line-chart fa-lg"></i>&nbsp; Lac Léman two consecutive years of data</button>
            </div>
            <div class="card-body text-left">
              <h6 class="card-title "> {{ y_one_s|add:y_two_s }} observations from 2015 - 2017</br>
                <small class="text-muted">28 different locations, multiple individuals</small></h6>
              <div id="scatterchart" class="" style="height:360px; width:360px; background-color:#ffffff"></div>
              <h6 class="card-text"></h6>
              <h6 class="card-text"> Was there was a change from 2016 to 2017 ?</h6>
              <p>The distribution of the natural log (np.log()) of the results tells the same story. The 95th percentile for year one is a little further to the right and the 5th percentile for year two is a little further to the left. </p>

            </div>
          </div>
        </div>
        <div class="col-sm "  id='gb_2' style="height:100%">
          <div class="card pb-0">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left"  id="" style="">
              <i class="fa fa-line-chart fa-lg"></i>&nbsp; Year over year probability density function
            </div>
            <div class="card-body text-left">
              <h6 class="card-title">Probability distribution of pcs/m <br>
                <small class="text-muted"> year one n={{ y_one_s }}, year two n= {{ y_two_s }} </small></h6>
              <div id="probchart" class="" style="height:360px; width:360px; background-color:#ffffff"> </div>
              <h6 class="card-text"> What does this mean?</h6>
              <p class="card-text">If you went down to the lake shore and collected and counted the garabgae, there was high probability that you would find the same amount year over year.
                Specifically the probability of finding less than 1 piece of trash per meter in 2016 was 3.1% and in 2017 it was 3%. So really no change at all. How is this calculated? -- <a href="https://github.com/hammerdirt/notes/blob/master/notes-hammerdirt.ch/Beach-Litter%20home.ipynb">check here</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="shutter mx-auto" id="in_progress">
      <div class="row no-gutters bg-info shutterTitle" style="height:100%" >
        <h5 class="w-100 text-white">In the oven<br>
          <small class="text-left p-1">Works in progress and most of the "mathy stuff" is done in a notebook. This is a collection of those notebooks.</small></h5>
      </div>
      <div class="row no-gutters" id='ap' style="height:100% ">
        <div class="col-sm" id='ap_0' style="height:100%">
          <div class="card pb-0" id="">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              Automated reporting
            </div>
            <div class="card-body text-left" style="height:100%">
              <h6 class="card-title">Communicating results in an objective manner
                <br><small class="text-muted">Standard format for all operations
                <br>Automated, exploitable at the time the record is created</small></h6>
              <p class="card-text">This is the initial code used to generate standardized, automated reports for the SLR.  Python (Pandas, Matplotlib, Jupyter) are the main tools.  Output is PDF or any image file (see below)</p>
              <p class="card-text">This work will be revived and the function offered to participating organisations. However there is still alot of work that needs to be done.</p>
              <p class="card-text"> Links to a <a href="https://github.com/hammerdirt/beachLitterSurveys"> repository on Github </a></p>
              <img src="{% static 'images/report.png' %}" class="img-fluid">
            </div>
          </div>
        </div>
        <div class="col-sm" id='ap_1' style="height:100%">
            <div class="card pb-0" id="">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              A rating scheme for beach litter based on probability
            </div>
            <div class="card-body text-left" style="height:100%">
              <h6 class="card-title">Using the probability distribution of litter to rate beaches
                <br><small class="text-muted">Based on the Log normal distribution
                <br>A beaches average pcs/m result is comapred to the distribution</small></h6>
              <p class="card-text">It is impossible to determine how much trash is really out there. However we can determine how likeley you are to find a quantity of trash at a beach. We use that to rate beach litter at sites in the SLR.</p>
              <p class="card-text">Links to a <a href="https://github.com/hammerdirt/stopLight"> repository on Github </a></p>
              <h6 class="card-title mt-2">Image: Rating of SLR beaches
                <br><small class="text-muted">Rating based on beaches avg pcs/m quantile ranking.
                <br>Four classifications</small></h6>
              <img src="{% static 'images/stopLights.jpg' %}" class="img-fluid">
            </div>
          </div>

        </div>
        <div class="col-sm "  id='ap_2' style="height:100%">
          <div class="card pb-0" id="">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              Comparing probability distributions
            </div>
            <div class="card-body text-left" style="height:100%">
              <h6 class="card-title">Answering the question: "What will you find at the beach?"
                <br><small class="text-muted">Comparing the PDF for pcs/m across categories and items
                <br>Hotel nights sold as a proxy for changes in pop density --- Montreux</small>              </h6>
              <p class="card-text">There are regional differences that can be identified by comparing the distributions of specific items. Even with a lower population density, Montreux still has an elevated pcs/m rating. Hotel nights sold per month can account for some of that.</p>
              <p class="card-text">Links to a <a href="https://github.com/hammerdirt/notes/blob/master/basel/Integrate%20hydro%2C%20pop-Copy1.ipynb"> repository on Github </a></p>
              <h6 class="card-title mt-2">Image: pcs/m results, lake vs rivers SLR
                <br><small class="text-muted">Logarithmic scale (np.log())
                <br>Only results  greater than zero</small></h6>
              <img src="{% static 'images/ln_rivers_lakes.svg' %}" class="img-fluid">
            </div>
          </div>
          <div class="card pb-0" id="">
            <div class="bg-dark text-white card-header p-2 pl-3 text-left" id="" style="">
              How much trash is out there?
            </div>
            <div class="card-body text-left" style="height:100%">
              <h6 class="card-title">Using results from the surveys to estimate quantity
                <br><small class="text-muted">Random sampling from a truncated gaussian distribution
                <br>Random sampling from actual results (with replacement)</small></h6>
              <p class="card-text">Somebody asked, so I did it.  How many pieces of trash are on the shores of Swiss water ways?</p>
              <p class="card-text">Links to a <a href="https://github.com/hammerdirt/notes/blob/master/how_much_trash.ipynb"> repository on Github </a></p>
              <img src="{% static 'images/how_much.svg' %}" class="img-fluid">
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
  <div class="modal fade" id="bl_30">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Measuring beach litter<br>
            <small class="text-muted"> For a list of further reading on the subject see the bibliography section of the MCBP results.</small>
          </h5>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            Beach litter density is the measure of trash on a fixed length of beach or shoreline.
          </p>
          <p>
            All visible trash is collected, the individual objects are identified and sorted using an international protocol.  This process is repeated multiple times per year
            at the same location. In Europe the two most important protocols are OSPAR and Marine Litter Watch.
          </p>
           <p>
             Research has connected 80% of marine debris to landbased activities.  However there has never been a national survey of aquatic litter in freshwater environements
             that uses similar methods.  Untill now.
           </p>
           <p>
             Combined, the SLR and MCBP have over 1000 samples from 135 locations across the country.  Establishing both a baseline and identifying the objects most frequently found
             in the environment.
           </p>

        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="mcbp-1">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">MCBP-1 2014-2015<br>
            <small class="text-muted"> Everything has a begining</small>
          </h5>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <h5> Introduction </h5>
          <p>
            The first project "Montreux Clean Beach" or MCBP-1 was initiated by Shannon and Roger Erismann in 2014.  After one year of collecting trash in the region
             of Montreux, Switzerland our conclusion was that the shores of Lake Geneva were covered with a uniform mix of cigarette butts, broken plastics, crushed styrofoam and qtips.
           </p>
          <p>The results were documented and presented to municpal, regional and national authorities in the form of a report detailing location, quantity and frequency.</p>
          <p>The document:
            <br><a href="https://drive.google.com/open?id=0BzPFamJgOYe1ZXExVFJ0cFZnRmM"> Under our feet, at the waters edge</a></p>
          <p>Although not a scientific report, this document was a launchpad for the second MCBP, and guided (guides) research into topics such as:
             <ul>
               <li>Aquatic litter, Citizen Science</li>
               <li>National and international legislaltion</li>
               <li>Water quality, Microbiology</li>
               <li>Data science, Data visualization</li>
               <li>Programing(python, js)</li>
               <li>Network communications</li>
             </ul>
           </p>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="mcbp-2">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">MCBP-2 2015-2016<br>
            <small class="text-muted"> Getting serious</small>
          </h5>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            MCBP-2 was started in November 2015, following the <a href="https://www.ospar.org/work-areas/eiha/marine-litter">OSPAR</a>
             and <a href="https://www.eea.europa.eu/themes/water/europes-seas-and-coasts/marine-litterwatch">Marine Litter Watch</a>(MLW)
             protocols. Centered in the region of Montreux, over 100 litter inventories were conducted in 12 months (52 inventories within the city limits of Montreux)
             each inventory detailed the following:</p>
             <ul>
                <li>Object found</li>
                <ul>
                  <li>Quantity</li>
                  <li>MLW Classification</li>
                  <ul>
                    <li>Description</li>
                    <li>Material composition</li>
                  </ul>
                </ul>
                <li>GPS coordinates</li>
                <li>Length of shoreline</li>
              </ul>

          <p>The results were documented using the <a href="http://www.kobotoolbox.org/">Open-Data-Kit (Kobo-Collect)</a> and were made availbale to the public on our Google-Drive</p>
          <p>MCBP-2 produced two documents:</p>
            <ul>
              <li> <a href="https://drive.google.com/open?id=0BzPFamJgOYe1RFJmR01qeWZtQWc">The ln(beach-litter-density)</a></li>
              <ul>
                <li>Compares results from MCBP-2 to other OSPAR regions</li>
                <li>Compares results fromt the EPFL stduy in 2014</li>
                <li>Expresses trash as a value of pcs/m </li>
              </ul>
              <li> <a href="https://drive.google.com/open?id=0BzPFamJgOYe1S2R4WC01cDBlQzg">Annex-B</a></li>
              <ul>
                <li>Comparative analysis of results</li>
                <li>Regression of pcs/m against river discharge rates</li>
                <li>Identification of most common items found</li>
                <li>Expression of pcs/m as a probability mass function</li>
              </ul>
            </ul>
          <p>The results were presented to municipal, regional and national authorities.</p>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="mcbp-3">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">MCBP-3 2016-2017<br>
            <small class="text-muted">Making the efforts sustainable with automation and data-science </small>
          </h5>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>MCBP-3 is a departure from the hammerdirt role as volunteer trash collectors.  It became obvious that no official institutions
            were interested in analyzing or using the collected data. Therefore we decided to create te infrastructure necesary to
            automate the basic analysis and visualization of the results.</p>
            <ul>
              <li> Automation of data handling</li>
              <ul>
                <li>Develop our own app for logging data</li>
                <li>Automate presentation of results and descriptive statistics</li>
                <li>Automate standard data visualisations</li>
              </ul>
              <li>Specifically we focussed on the following programing languages/platforms:</li>
              <ul>
                <li> Python (django, pandas, scikit-learn, matplotlib, numpy, et all...)</li>
                <li> HTML5/CSS -- Bootstrap 4 </li>
                <li> JavaScript (Highcharts, D3, jQuery, react, react-native, nodeJs)</li>
                <li> Java (android), MySQL, linux(shell) </li>
              </ul>
            </ul>
          <p>As a result we did fewer litter inventories. However this led to several operations improvements:</p>
          <ul>
            <li>Software fees were reduced to zero (not including server costs)</li>
            <li>This allowed for possible IT hardware investments </li>
            <li>Reduced time spent generating reports</li>
            <li>Increased access to results and data</li>
            <li>Reduced overall time spent on adminstrative tasks</li>
          </ul>

        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="mcbp-4">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">MCBP-4 2017-<br>
            <small class="text-muted">Beach litter surveillance made easy</small>
          </h5>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            There will be no further MCBP projects. The development of our platform elimnates the need for a project based approach
            to aquatic litter monitoring in the area.
          </p>
          <p>
            Litter surveillance will continue throughout the year at various locations in the region. However, efforts in this domain will be focussed on data analysis and visualisation.
          </p>
          <p>
            We can do that now that the easy stuff has been automated !
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="slr">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">The Swiss Litter Report<br>
            <small class="text-muted">Litter surveillance on a national scale</small>
          </h5>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            The Swiss Litter Report(SLR) is a project by <a href="http://stoppp.org/swiss-litter-report">STOPPP</a> and <a href="https://www.wwf.ch/de">WWF Switzerland</a>. WWF and STOPPP volunteers monitor over 100 sites across Switzerland.
          </p>
          <p>
           The methods used by the SLR produce comparable data to the MCBP series and when both data sets are considered a national baseline
           for shoreline litter can be established.</p>
           <p>
             There are a couple of differences:
             <ul>
               <li>Most of the samples from MCBP were collected by three people, the SLR has hundreds of volunteers</li>
               <li>MCBP was started by two people in response to repeated observations in their own community.  The SLR is a project iniated by
                 a large organization and administered from the top down</li>
               <li>*MCBP counts every item found with no lower size limit(OSPAR), SLR has a lower size limit of 2.5cm(MLW)</li>
             </ul>
           </p>
           <p>*We believe that this accounts for the difference in the probability distribution of the two projects</p>
          </div>
      </div>
    </div>
  </div>
  <div class="modal fade w-100" id="water_search">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header bg-info text-white">
          <div class="container-fluid">
            <h5 class="">The search is limted to cities and lakes/rivers that have registered surveys<br>
            <small class="text-white">If you would like to have a project listed here, contact us.</small></h5>
          </div>
        </div>
        <div class="modal-body">
          <div class="card-group">
            <div class="card " style="">
              <h5 class="card-title">Pick a city</h5>
              <div class="card-body">
                <form class="d-inline-block mb-1" action='/dirt/search_city/' method='get'>
                <i class="fa fa-folder-open fa-lg mr-1 "></i>&nbsp;Details:&nbsp;&nbsp;
                <select class="form-control-sm d-inline-block mr-2" style="width:160px" name='city'>
                  {% for x in all_cities %}
                  <option class="txt-12" value= "{{ x }}">{{ x }}</option>
                  {% endfor %}
                </select>
                <button class="d-inline-block btn  txt-14 p-1" style="background-color:transparent; border-color:black; border-width:1px" type='submit' ><i class="fa fa-external-link fa-lg"></i></button>
              </form>
                <div class="card-text"><small>* Get all results from a city</small></div>
              </div>
            </div>
            <div class="card " style="">
              <h5 class="card-title">Pick a  body of water</h5>
              <div class="card-body">
                <form class="d-inline-block mb-1" action='/dirt/search_water/' method='get'>
                <i class="fa fa-folder-open fa-lg mr-1 "></i>&nbsp;Details:&nbsp;&nbsp;
                <select class="form-control-sm d-inline-block mr-2"style="width:160px" name='water'>
                  {% for x in all_water %}
                  <option class="txt-12" value= "{{ x }}">{{ x }}</option>
                  {% endfor %}
                </select>
                <button class="d-inline-block btn txt-14 p-1" style="background-color:transparent; border-color:black; border-width:1px" type='submit' ><i class="fa fa-external-link fa-lg"></i></button>
              </form>
                <div class="card-text"><small>* Get all results from a river or lake </small></div>
              </div>
            </div>
            <div class="card " style="">
              <h5 class="card-title">Pick a  project</h5>
              <div class="card-body">
                <div class="container-fluid p-0 m-0">
                  <div class="btn-toolbar mb-1">
                  <div class="btn-group">
                    <a class="btn bg-info text-white mt-1 p-2 border-white"  style="white-space: normal;" href="{% url 'slr_home' %}" aria-expanded="false" aria-controls="">
                      SLR</a>
                    <a class="btn bg-info text-white mt-1 p-2 border-white" style="white-space: normal;" href="{% url 'mcbp_home' %}" aria-expanded="false" aria-controls="table-of-results">
                      MCBP</a>
                    <a class="btn bg-info text-white mt-1 p-2 border-white" style="white-space: normal;" href="{% url 'hdc_home' %}" aria-expanded="false" aria-controls="table-of-results">
                      HDC</a>
                  </div>
                </div>
                </div>
                <div class="card-text"><small>* SLR results given in m<sup>2</sup></small></div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer bg-info">
          <button type="button" class="close text-white" data-dismiss="modal" aria-label="close">
            <span aria-hidden="true">&times;</span></button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="assume">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">Assumptions and notes</h6>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p class="font-weight-bold">Assumptions:</p>
          <ul>
            <li>You know what a probability distribution is.</li>
            <li>In general the probability of finding any amount of trash on the shoreline is related to the total amount of trash in the environment.</li>
            <li>That the variety of locations are sufficient to develop a representative model.</li>
            <li>These are minimums. There is actually alot more trash out there. It was just not identified or counted.</li>
            <li>There are many variables that are unacounted for in this model (lake-levels, pop-density, weather patterns).</li>
            <li>That the samples were gathered according to the protocols provided to the particpants.</li>
          </ul>
          <p class="font-weight-bold">Notes:</p>
          <ul>
              <li>Pieces/meter (pcs/m) values are rounded to thousandths (.001)</li>
              <li>This is the work of hammerdirt association, as of {{ t_day|date:"D d M Y" }} we have received no financial or technical assistance from the SLR or WWF -- or anybody act.</li>
              <li>Your comments or feedback are greatly appreciated, contact us.</li>
          </ul>

        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="sun_shine">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">All items identified since Nov 2015, last inventory date {{ summary.last|date:"M Y" }}</h6>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <table class="table-striped table table-sm">
            <thead class="txt-14">
              <tr>
                <th class="text-left">Item</th>
                <th class="text-left">Material</th>
                <th class="text-center p-1">Code</th>
                <th class="text-center p-1">Quantity</th>
              </tr>
            </thead>
            {% for s in inventory %}
            <tr class="txt-12">
              <td class="text-left">{{ s.description }}</td>
              <td class="text-left"> {{ s.material }}</td>
              <td class= "text-center">{{ s.code }}</td>
              <td class="text-right ">{{ s.total|floatformat:0|intcomma }}</td>
            </tr>
            {% endfor %}
            <tr>
              <td colspan="3" class="bg-info text-white"> End of inventory
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="lakes_rivers">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">Lakes and rivers surveyed,  last inventory date {{ summary.last|date:"M Y" }}</h6>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <dl class="row">
            <dt class="col-sm-3">Lake or river</dt>
            <dd class="col-sm-9">List of survey locations</dd>
          </dl>
          <dl class="row">
            {% for s, t in bodies_dict.items  %}
            <dt class="col-sm-3">{{ s }}</dt>
            <dd class="col-sm-9">{{ t|join:", " }} </dd>
            {% endfor %}
          </dl>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="sum_data">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">The top-ten items indentified from all samples.<small class="text-mutted">
          <br>REMEMBER: these are the reported observations of people in your community
          <br>Units are "pieces", the description and code are Marine Litter Watch</small>
          </h6>
          <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="card-group">
            <div class="card">
              <div class="card-body">
                <div class="card-title"><h6>Table of results: sorted by material type
                  <br><small class="text-muted">Material class taken from MLW guide
                  <br>Material class is given with the item code</small></h6>
                </div>
                <table class="table-striped table table-sm">
                  <thead class="">
                    <tr class="p-1 pl-2 text-left">
                      <th class="">Material</th>
                      <th class="">Quantity</th>
                      <th class="">Percent of total</th>
                    </tr>
                  </thead>
                    {% for s, v in mk_pers.items %}
                  <tr class="p-1 pl-2 text-left">
                    <td class="">{{ s }}</td>
                    <td class="text-right"> {{ v.0|floatformat:0|intcomma }} </td>
                    <td class="text-right"> {{ v.1|floatformat:0|intcomma }}% </td>

                  </tr>
                  {% endfor %}
                </table>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="card-title"><h6>Table of results: ten most indentified objects
                  <br><small class="text-muted">Object description sourced from MLW guide
                    <br>Object description is provided with the item code</small></h6>
                </div>
                <table class="table-striped table table-sm">
                  <thead class="">
                    <tr class="p-1 pl-2 text-left">
                      <th><small class="font-weight-bold">Item</small></th>
                      <th class=""><small class="">Material</small></th>
                      <th class=""><small class="">Qty</small></th>
                      <th class=""><small class="">% total</small></th>
                    </tr>
                  </thead>
                  {% for s in top_ten %}
                  <tr class="p-1 pl-2 text-left">
                    <td class=""><small>{{ s.description }}</small></td>
                    <td class=""> <small>{{ s.material }}</small></td>
                    <td class="text-right "><small>{{ s.total|floatformat:0|intcomma }}</small></td>
                    <td class="text-right "><small>{{ s.per|floatformat:0|intcomma }}%</small></td>
                  </tr>
                  {% endfor %}
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<div class="modal fade" id="box_one">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Beach-litter densities 2015-2018 rivers vs. lakes : SLR & MCBP<br>
          <small class="text-muted"> Click and drag to zoom date, enable/disable groups in the legend </small>
        </h5>
        <button type="button" class="close align" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="box_plot_one" style="width:100%; min-width:500px"></div>
      </div>
    </div>
  </div>
</div>
</div>


{% endblock %}

{% block charts %}




<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>


<script type="text/javascript">
var year_onex = {{ year_one|safe }};
var year_twox = {{ year_two|safe }}
var dist_2016 = {{ dist_2016|safe }}
var dist_2017 = {{ dist_2017|safe }}
var combined_map = {{ combined_map|safe}}
var plot_all = {{ plot_all|safe }}
var top_ten = {{ top_ten|safe }}
var mc_plot = {{ plot_mc|safe }};
var river = {{ rivers|safe }};
var lake = {{ lakes|safe }};
var box_lakes = {{ box_lake|safe }};
var box_rivers = {{ box_river|safe }};
var box_mcs = {{ box_mc|safe }};


var year_one = [];
year_onex.forEach(function(element){
  element.date = Date.parse(element.date);
  element.density = parseFloat(element.density);
  var today = new Date();
  if (element.date < today){
    year_one.push({"name":element.location_id, "x":element.date, "y":element.density});
  }
});

var year_two = [];
year_twox.forEach(function(element){
  element.date = Date.parse(element.date);
  element.density = parseFloat(element.density);
  var today = new Date();
  if (element.date < today){
    year_two.push({"name":element.location_id, "x":element.date, "y":element.density});
  }
});

var ts_plot = [];
plot_all.forEach(function(element){
  element.date = Date.parse(element.date);
  element.density = parseFloat(element.density);
  var today = new Date();
  if (element.date < today){
    ts_plot.push({"name":element.location_id, "x":element.date, "y":element.density});
  }
});
var plot_mc = [];
mc_plot.forEach(function(element){
  element.date = Date.parse(element.date);
  element.density = parseFloat(element.density);
  plot_mc.push ({"name":element.location_id, "x":element.date, "y":element.density})
});
var riv_dens = [];
river.forEach(function(element){
  element.date = Date.parse(element.date);
  element.density = parseFloat(element.density);
  riv_dens.push ({"name":element.location_id, "x":element.date, "y":element.density})
});
//
var lak_dens = [];
lake.forEach(function(element){
  element.date = Date.parse(element.date);
  element.density = parseFloat(element.density);
  lak_dens.push ({"name":element.location_id, "x":element.date, "y":element.density})
});
//
var lake_box = [];
box_lakes.forEach(function(element){
  element[0] = Date.parse(element[0]);
  lake_box.push([element[0], element[1], element[2], element[3], element[4], element[5]])
});

var river_box = [];
box_rivers.forEach(function(element){
  element[0] = Date.parse(element[0]);
  river_box.push([element[0], element[1], element[2], element[3], element[4], element[5]])
});
//
var mc_box = [];
box_mcs.forEach(function(element){
  element[0] = Date.parse(element[0]);
  mc_box.push([element[0], element[1], element[2], element[3], element[4], element[5]])
});

</script>

<script type="text/javascript">
Highcharts.chart('scatterchart', {
    chart: {
        type: 'scatter',
        plotBorderWidth:0,
        spacingBottom: 20,
        zoomType: 'x',
        style: {
          fontFamily: 'sans-serif',
        }
    },
    title: {
        text: '',
        style: {
            display: 'none'
        }
    },
    subtitle: {
        text: '',
        style: {
            display: 'none'
        }
    },
    credits:{
      text:'hammerdirt 2018',

    },
    exporting: {
      enabled:false,
    },
    legend: {
      enabled: true,
      align: 'right',
      verticalAlign: 'top',
      horizontalAlign: 'right',
      layout:'vertical',
      floating:true,
      x:0,
      y:10,
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .5)',
      borderWidth:1,
      itemMarginTop:4,
      itemMarginBottom:4,
      itemStyle:{
        color: 'black',
        fontSize: 14,
        fontWeight: 'bold',
      }
    },
    xAxis: {
      type: 'datetime',
      tickInterval:3600*1000*24*28*2,
      labels: {
        style: {
          color:'rgba(00, 00, 00, 1)'
        }
      },
      dateTimeLabelFormats: {
        month: '%b - %Y',
      },
    },
    yAxis: {
        title: {
            align: 'low',
            offset: 40,
            text: 'Pieces of trash per meter of shoreline',
            style:{
              fontSize: '12px',
              color:'#000000',
            },
        },
        gridLineColor:'rgba(10, 46, 92, .1)',
        labels:{
          style: {
            color:'rgba(00, 00, 00, 1)'
          }
        },
        tickInterval: 8,
        min: 0,

    },
    tooltip: {
        headerFormat: '<b>{point.key}</b><br>',
        pointFormat: '{point.x:%e-%b}: {point.y:.2f} pcs/m'
    },
    series: [
      {
      zIndex:3,
      type: 'scatter',
      name:'Year one',
      marker: {
        symbol: 'circle',
        radius:6,
        lineColor: 'rgb(255, 255, 255, 1)',
        fillColor:  'rgb(255, 0, 0, .6)',
        lineWidth:1,
      },
      data:year_one,

    },
    {
      zIndex:3,
      type: 'scatter',
      name:'Year two',
      marker: {
        symbol: 'circle',
        radius:6,
        lineColor: 'rgb(255, 255, 255, 1)',
        fillColor:  'rgb(0, 0, 255, .6)',
        lineWidth:2,
      },
      data:year_two,

    },

  ],
  }
);
</script>

<script type="text/javascript">
Highcharts.chart('combined-ts', {
    chart: {
        type: 'area',
        plotBorderWidth:0,
        spacingBottom: 20,
        zoomType: 'x',
        style: {
          fontFamily: 'sans-serif',
        }
    },
    title: {
        text: null,
        style:{
          fontSize: '16px',
          color:'#0A2E5C',

        },
    },
    credits:{
      text:'hammerdirt 2018',

    },
    exporting: {
      enabled:false,
    },
    legend: {
      enabled: true,
      verticalAlign: 'top',
      horizontalAlign: 'left',
      layout:'vertical',
      floating:true,
      x:-30,
      y:20,
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .5)',
      borderWidth:1,
      itemMarginTop:4,
      itemMarginBottom:4,
      itemStyle:{
        color: 'black',
        fontSize: 14,
        fontWeight: 'bold',
      }
    },
    xAxis: {
      type: 'datetime',
      tickInterval:3600*1000*24*28*2,
      labels: {
        style: {
          color:'rgba(00, 00, 00, 1)'
        }
      },
      dateTimeLabelFormats: {
        month: '%b - %Y',
      },
    },
    yAxis: {
        title: {
            align: 'low',
            offset: 40,
            text: 'Pieces of trash per meter of shoreline',
            style:{
              fontSize: '12px',
              color:'#000000',
            },
        },
        gridLineColor:'rgba(10, 46, 92, .1)',
        labels:{
          style: {
            color:'rgba(00, 00, 00, 1)'
          }
        },
        tickInterval: 8,
        min: 0,

    },
    tooltip: {
        headerFormat: '<b>{point.key}</b><br>',
        pointFormat: '{point.x:%e-%b}: {point.y:.2f} pcs/m'
    },
    plotOptions:{
      series: {
        turboThreshold: 2000
      }
    },
    series: [
      {
      zIndex:3,
      type: 'scatter',
      name:'Results per inventory',
      marker: {
        symbol: 'circle',
        radius:6,
        lineColor: 'rgba(255, 00, 00, .8)',
        fillColor:  'rgba(255, 65, 168, .6)',
        lineWidth:1,
      },
      data:ts_plot,

    }
  ],
  }
);
</script>

<script type="text/javascript">

Highcharts.chart('probchart', {

    chart: {

    },
    credits:{
      text:'hammerdirt 2018',

    },
    title: {
         text: ''
    },
    exporting: {
      enabled:false,
    },


    xAxis: {
        labels: {
            format: 'e^{value}'
        },
        minRange: 5,
        title: {
            text: 'log(pcs/m)'
        }
    },

    yAxis: {
        // startOnTick: true,
        // endOnTick: false,
        // maxPadding: 0.35,
        title: {
            text: 'frequency'
        },
        labels: {
            format: '{value}'
        }
    },

    // tooltip: {
    //     headerFormat: 'Distance: {point.x:.1f} km<br>',
    //     pointFormat: '{point.y} m a. s. l.',
    //     shared: true
    // },

    legend: {
        enabled: false
    },

    series: [{
        data: dist_2016,
        lineColor: 'rgb(255, 0, 0, .6)',
        // lineColor: Highcharts.getOptions().colors[2],
        // color: Highcharts.getOptions().colors[2],
        // fillOpacity: 0.5,
        name: 'Year one',
        // dashStyle: 'shortdot',
        marker: {
            enabled: false
        },
        threshold: null
    },{
        data: dist_2017,
        lineColor: 'rgb(0, 0, 255, .6)',
        // color: Highcharts.getOptions().colors[2],
        // fillOpacity: 0.5,
        name: 'Year two',
        // dashStyle: 'longdash',
        marker: {
            enabled: false
        },
        threshold: null
    }
  ]

});

</script>

<script type="text/javascript">

</script>

<script type="text/javascript">
var map;
var styledMapType;

function initMap() {
  styledMapType = new google.maps.StyledMapType(
    [
    {
      "featureType": "administrative",
      "elementType": "geometry",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "administrative.land_parcel",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "administrative.locality",
      "elementType": "geometry.fill",
      "stylers": [
        {
          "color": "#313026"
        }
      ]
    },
    {
      "featureType": "administrative.locality",
      "elementType": "geometry.stroke",
      "stylers": [
        {
          "color": "#313026"
        }
      ]
    },
    {
      "featureType": "administrative.neighborhood",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "poi",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "poi",
      "elementType": "labels.text",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "road",
      "elementType": "labels",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "road",
      "elementType": "labels.icon",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "road.arterial",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "road.highway",
      "elementType": "labels",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "road.local",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "transit",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    },
    {
      "featureType": "water",
      "elementType": "geometry.fill",
      "stylers": [
        {
          "color": "#00cdff"
        }
      ]
    },
    {
      "featureType": "water",
      "elementType": "labels.text",
      "stylers": [
        {
          "visibility": "off"
        }
      ]
    }
  ],
{name:'Litter surveys : Switzerland'});
  map = new google.maps.Map(document.getElementById('combined_map_all'), {
    zoom:7,
    center: {lat: 47.207, lng: 8.058},
    minZoom:6,
    mapTypeControlOptions: {
      mapTypeIds: ['styled_map'],
    },
    streetViewControl:false,
    fullscreenControl:false,


  });

  var infowindow = new google.maps.InfoWindow();
  var marker, i, scayle, contentString;
  var markers = []

  for (i = 0; i < combined_map.length; i++) {
    // console.log(combined_map[i])
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(combined_map[i][0], combined_map[i][1]),
      map: map,
      type: combined_map[i][7],
      water: combined_map[i][8],
      // // console.log(water),
      // fillColor: 'rgba(255, 65, 168, .8)',
      // lineColor: 'rgb(255, 00, 00)',
      // lineColor: 'rgba(255, 00, 00, .8)',
      // fillColor:  'rgba(255, 65, 168, .6)',
      icon: {
        path: google.maps.SymbolPath.CIRCLE,
        scale: Math.sqrt(combined_map[i][2])*5,
        fillColor:  'rgba(255, 65, 168, .6)',
        strokeColor:'rgba(255, 00, 00, .8)',
        fillOpacity:1,
        strokeOpacity:1,
        strokeWeight:2,
      },

    });

    // markers[combined_map[3]] = marker;
    var contentString = '<div><p style="margin-bottom:4px; font-size:14px;">' +  combined_map[i][6] + '</p>'+
    '<ul><li>City: ' + combined_map[i][4] +'</li><li> Postal Code: ' + combined_map[i][3] + '</li><li>Average pcs/m: ' + combined_map[i][2] + '</li><li>N<sup>o</sup> of samples: ' +
    combined_map[i][5] + '</li><li>Lake or River: ' + combined_map[i][8] + '</li><li>Project : ' + combined_map[i][7] + '</li></ul></div>';
    marker.addListener('click', function(content){
      return function(){
        infowindow.setContent(content);
        infowindow.open(map, this);
      }
    }(contentString));


    markers.push(marker);
  };
  // console.log(markers[8].water);
  // console.log(markers[8].type);
  $('button[type=submit]').on('click', function(){
    var input_id = $(this).attr('id');
    // console.log(this);
    console.log(input_id)
    // console.log(markers[11].water);
    for (i = 0; i < markers.length; i++){
      if (input_id == 'all'){
          markers[i].setVisible(true);
      }else if (markers[i].type == input_id){
        markers[i].setVisible(true);
      } else if (markers[i].water == input_id){
        // console.log('true');
        // console.log(markers[i].water);
        markers[i].setVisible(true);
      }else {
        // console.log('false');
        // console.log(markers[i].water);
        markers[i].setVisible(false);
      }
    }
  }),




  map.mapTypes.set('styled_map', styledMapType);
  map.setMapTypeId('styled_map');

  };

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAm40jm5y3TNXHeagBkulq-mS2A3ep4TWY&libraries=visualization&callback=initMap"  async defer> </script>

<script type="text/javascript">
Highcharts.chart('box_plot_one', {

    chart: {
        type: 'boxplot',
        zoomType:'x',
        spacingBottom: 20,
    },
    exporting: {
      enabled:false,
    },

    title: {
        text: null,
        style:{
          fontSize: '14px',
          color:'#0A2E5C',

        },
    },
    subtitle: {
      text: null,
      style:{
        fontSize: '10px',
        color:'#0A2E5C',
      }

    },
    credits:{
      text:'hammerdirt 2018',

    },

    legend: {
      enabled: true,
      verticalAlign: 'bottom',
      align: 'center',
      layout:'horizontal',
      backgroundColor:'rgba(255,255,255, .4)',
      borderColor:'rgba(10, 46, 92, .4)',
      borderWidth:1,
      padding:8,
      margin:12,
      itemMarginBottom:2,
      itemDistance: 4,
      itemWidth:99,
      itemStyle:{
        color: 'black',
        fontSize: '10px',

      },
    },
    plotOptions:{
      boxplot:{
        stemColor:'rgb(10, 46, 92, 1)',
        stemDashStyle: 'dash',
        stemWidth:1,
        whiskerColor: 'rgba(00, 00, 00, 1)',
        groupPadding:0,
      }
    },

    xAxis: [{
        // categories:box_cats,
        type: 'datetime',
        min: Date.UTC(2015, 11, 01),
        tickColor:'rgba(00, 00, 00, 1)',
        tickInterval:3600*1000*24*28,
        tickColor:'rgba(00, 00, 00, 1)',
        labels: {
          rotation:270,
          color:'rgba(00, 00, 00, 1)',
          fontSize:'10px'
        },
        opposite:false,

    },

  ],
    yAxis: {
      min:0,
      max:85,
      ceiling:50,
      alignTicks:false,
      tickInterval:10,
      minPadding:0.1,
      title: {
          align: 'low',
          offset: 40,
          text: 'Pieces of trash per meter',
          style:{
            fontSize: '12px',
            color:'#0A2E5C',
          },
      },
      gridLineColor:'rgba(10, 46, 92, .1)',
      minorTickInterval:2,
      labels:{
        style: {
          color:'rgba(00, 00, 00, 1)',
          fontSize: '10px'
        }
      },

    },

    series:
    [
      {
      zIndex:3,
      fillColor:'rgba(255, 65, 168, .6)',
      lineColor: 'rgba(00, 00, 00, 1)',
      medianColor:'rgba(22, 199, 158, 1)',
      color:'rgba(255, 65, 168, .6)',
      xAxis:0,
      type: 'boxplot',
      name: 'SLR lakes - monthly',
      data: lake_box,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      },

    },
    {
      zIndex:3,
      fillColor:'rgba(10, 46, 92, 1)',
      lineColor: 'rgba(00, 00, 00, 1)',
      medianColor:'rgba(22, 199, 158, 1)',
      color:'rgba(10, 46, 92, 1)',
      xAxis:0,
      type: 'boxplot',
      name: 'SLR rivers - monthly',
      data: river_box,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      },

    },
    {
      zIndex:3,
      fillColor:'rgba(255, 65, 168, .6)',
      lineColor: 'rgba(00, 00, 00, 1)',
      medianColor:'rgba(22, 199, 158, 1)',
      color:'rgba(255, 65, 168, .6)',
      squareSymbol: true,
      xAxis:0,
      type: 'boxplot',
      name: 'MCBP - monthly',
      data: mc_box,
      tooltip: {
          headerFormat: '<em>{point.key}</em><br/>'
      },

    },
    {
      zIndex:2,
      xAxis:0,
      type: 'scatter',
      name:'SLR - lake',
      marker: {
        symbol: 'circle',
        radius:3,
        lineColor: 'rgba(00, 00, 00, .3)',
        fillColor:  'rgba(255, 65, 168, .5)',
        lineWidth:1,
      },
      data:lak_dens,
      tooltip: {
          headerFormat: '<b>{point.key}</b><br>',
          pointFormat: '{point.x:%e-%b}: {point.y:.2f} pcs/m'
      },
    },
    {
      zIndex:2,
      xAxis:0,
      type: 'scatter',
      name:'SLR - river',
      marker: {
        symbol: 'circle',
        radius:3,
        lineColor: 'rgba(00, 00, 00, .3)',
        fillColor:  'rgba(10, 46, 92, .4)',
        lineWidth:1,
      },
      data:riv_dens,
      tooltip: {
          headerFormat: '<b>{point.key}</b><br>',
          pointFormat: '{point.x:%e-%b}: {point.y:.2f} pcs/m'
      },
    },
    {
      zIndex:2,
      xAxis:0,
      type: 'scatter',
      name:'MCBP - lake',
      marker: {
         symbol: 'circle',
        radius:3,
        lineColor: 'rgba(00, 00, 00, .3)',
        fillColor:  'rgba(255, 65, 168, .5)',
        lineWidth:1,
      },
      data:plot_mc,
      tooltip: {
          headerFormat: '<b>{point.key}</b><br>',
          pointFormat: '{point.x:%e-%b}: {point.y:.2f} pcs/m'
      },

    }

    ]

});

</script>

<script type="text/javascript">


$(document).ready(function() {

  $('.shutterTitle').click(function() {
    var parentTag = $( this ).parent();
    var this_height = $(this);
    var this_child = $(this).children()[1];
    console.log(this_child);

    $( parentTag ).each(function(i){
      if ($(parentTag).hasClass('close-animate') || !$(parentTag).hasClass('shutterExpanded')) {
      console.log(this);
      $(this_height ).css("height", "auto");
      $(this_height).addClass('text-right');
      $(this_height).addClass('pr-3');
      $(this_height).removeClass('p-1');

      $(parentTag).removeClass('close-animate').addClass('shutterExpanded');
      $('.wrapper').addClass('shutterOpen');
      console.log(this_child)

    } else {
      console.log("Else");
      $(this).removeClass('shutterExpanded').addClass('close-animate');
      $(this_height).removeClass('text-right');
      $(this_height).removeClass('pr-3');
      $(this_height).addClass('p-1');
      // $(this_height).children(".p").css("display", "visible");
      $(this_height ).css("height", "100%");
      $('.wrapper').removeClass('shutterOpen');
      console.log(this);
    }

  });
})}
);
</script>

{% endblock %}
